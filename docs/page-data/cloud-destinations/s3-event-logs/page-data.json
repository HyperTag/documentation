{"componentChunkName":"component---src-templates-page-js","path":"/cloud-destinations/s3-event-logs/","result":{"data":{"markdownRemark":{"frontmatter":{"path":"/cloud-destinations/s3-event-logs/","title":""}}},"pageContext":{"html":"\n    <section>\n      \n    <div class=\"toc\">\n      <div class=\"toc-sticky\">\n        <h6>On this Page:</h6>\n        <ul><li><a href=\"#what-is-amazon-s3-and-how-does-it-work\">What is Amazon S3 and how does it work?</a></li> <li><a href=\"#why-send-data-to-amazon-s3-using-metarouter\">Why send data to Amazon S3 using MetaRouter?</a></li> <li><a href=\"#getting-started-with-amazon-s3-and-metarouter\">Getting Started with Amazon S3 and MetaRouter</a></li> <li><a href=\"#things-to-note\">Things to Note</a></li></ul>\n      </div>\n    </div>\n  \n      <html><head></head><body><h1 id=\"amazon-s3-event-logs\" style=\"position:relative;\" data-tags=\"cloud,destinations\"><a href=\"#\" aria-label=\"amazon s3 event logs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Amazon S3 Event Logs</h1>\n<p>MetaRouter makes it easy to send your data to an Amazon S3 bucket. Once you follow the steps below, your data will be routed through our platform and pushed to Amazon S3 in the appropriate format.</p>\n<h2 id=\"what-is-amazon-s3-and-how-does-it-work\" style=\"position:relative;\"><a href=\"#what-is-amazon-s3-and-how-does-it-work\" aria-label=\"what is amazon s3 and how does it work permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>What is Amazon S3 and how does it work?</h2>\n<p>Amazon Simple Storage Service (S3) is a scalable web-based cloud storage service that allows you to store and retrieve data from anywhere at anytime. It offers an extremely flexible set of storage management and administration capabilities, supporting:</p>\n<ul>\n<li>SSL transfers and automatic encryptions for guaranteed data security</li>\n<li>Network-optimized, physical disk-based, or third-party connector methods for easy data imports and exports</li>\n<li>Object tagging for easy category customization</li>\n</ul>\n<p>Getting data into your S3 bucket natively requires quite a bit of developer work; you&apos;d need to use an analytics tool like <a href=\"/cloud-destinations/google-analytics\">Google Analytics</a> and write an ETL pipeline to bring the data from that analytics tool to S3. This is inefficient in that it utilizes your engineering resources and dumps pre-formatted data into your S3 bucket rather than raw data.</p>\n<h2 id=\"why-send-data-to-amazon-s3-using-metarouter\" style=\"position:relative;\"><a href=\"#why-send-data-to-amazon-s3-using-metarouter\" aria-label=\"why send data to amazon s3 using metarouter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Why send data to Amazon S3 using MetaRouter?</h2>\n<p>Getting data to Amazon S3 ultimately leaves you with data that was designed to power reports within an analytics tool, not the raw data you need for custom analysis.</p>\n<p>When you enable the Amazon S3 integration, raw data from MetaRouter automatically gets copied into your Amazon S3 bucket. Everything is stored as line-separated JSON objects, which each contains data from a single API called made to our platform.</p>\n<p>MetaRouter spares you the headache of writing custom ETL pipelines to get your data into an S3 bucket.</p>\n<h2 id=\"getting-started-with-amazon-s3-and-metarouter\" style=\"position:relative;\"><a href=\"#getting-started-with-amazon-s3-and-metarouter\" aria-label=\"getting started with amazon s3 and metarouter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Getting Started with Amazon S3 and MetaRouter</h2>\n<p>MetaRouter makes it easy to copy broadcasted events to an <a href=\"https://aws.amazon.com/s3/\">Amazon Simple Storage Service (S3) bucket</a>. You&apos;ll only need to configure the S3 Event Logs connector within your <a href=\"https://app.metarouter.io/\">MetaRouter dashboard</a>, and include our bucket policy.</p>\n<h3 id=\"amazon-s3-side\" style=\"position:relative;\"><a href=\"#amazon-s3-side\" aria-label=\"amazon s3 side permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Amazon S3 Side</h3>\n<h4 id=\"create-an-amazon-s3-bucket-within-your-aws-account\" style=\"position:relative;\"><a href=\"#create-an-amazon-s3-bucket-within-your-aws-account\" aria-label=\"create an amazon s3 bucket within your aws account permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Create an Amazon S3 bucket within your AWS account.</h4>\n<p><a href=\"https://cdn.metarouter.io/web/img/docs/content/s3-event-logs1.png\" target=\"_mr\"><img src=\"https://cdn.metarouter.io/web/img/docs/content/s3-event-logs1.png\" alt=\"s3-event-logs1\"></a></p>\n<p><strong>Note:</strong> See below to confirm your region.</p>\n<p>Once you create the bucket, create a folder labeled <code class=\"language-text\">MetaRouter-logs</code> inside of it.</p>\n<h4 id=\"add-our-s3-bucket-policy\" style=\"position:relative;\"><a href=\"#add-our-s3-bucket-policy\" aria-label=\"add our s3 bucket policy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Add our S3 Bucket Policy</h4>\n<p>Add the following S3 bucket policy, which will grant MetaRouter permission to copy events into your S3 bucket using <code class=\"language-text\">s3:PutObject</code>. In the <code class=\"language-text\">Resource:</code> line of each of the two policies below, swap out <code class=\"language-text\">YOUR_BUCKET_NAME</code> for the exact name of your S3 bucket, but keep the <code class=\"language-text\">/*</code> on the end.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">&quot;Version&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;2012-10-17&quot;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">&quot;Id&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;Policy1475027027703&quot;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">&quot;Statement&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">&quot;Sid&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;MetaRouterCopyAccess&quot;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;Effect&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;Allow&quot;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;Principal&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">&quot;AWS&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;arn:aws:iam::325517132571:user/s3-copy&quot;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;Action&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;s3:PutObject&quot;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;Resource&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;arn:aws:s3:::YOUR_BUCKET_NAME/*&quot;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"https://cdn.metarouter.io/web/img/docs/content/s3-event-logs2.gif\" target=\"_mr\"><img src=\"https://cdn.metarouter.io/web/img/docs/content/s3-event-logs2.gif\" alt=\"s3-event-logs1\"></a></p>\n<h3 id=\"metarouter-side\" style=\"position:relative;\"><a href=\"#metarouter-side\" aria-label=\"metarouter side permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>MetaRouter Side</h3>\n<p>Navigate to the <strong>Clickstream</strong> pane and select the pipeline you would like to add this S3 storage destination to. Under <strong>Destinations</strong> click <strong>New Destination</strong>. Search for and select <strong>S3 Event Logs</strong>. Give your destination a name and optionally fill in the <strong>Prefix</strong> where the file keys will be stored.</p>\n<p>Either configure a new S3 connection in your MetaRouter dashboard with a unique name or use an existing one. This connection holds your <strong>AWS Region</strong>, <strong>Bucket Name</strong>, and <strong>Server Side Encryption</strong> (as needed). Click Save to activate your pipeline.</p>\n<h2 id=\"things-to-note\" style=\"position:relative;\"><a href=\"#things-to-note\" aria-label=\"things to note permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Things to Note</h2>\n<h3 id=\"1-aws-region-required\" style=\"position:relative;\"><a href=\"#1-aws-region-required\" aria-label=\"1 aws region required permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>1. AWS Region (required):</h3>\n<p>The region in which your S3 bucket resides. You can find a list of regions for <a href=\"http://docs.aws.amazon.com/general/latest/gr/rande.html#s3_region\">Amazon S3 under the &quot;Region&quot; column here</a>. Enter your region exactly as it&apos;s shown (i.e. <code class=\"language-text\">us-east-1</code>).</p>\n<h3 id=\"2-server-side-encryption-optional\" style=\"position:relative;\"><a href=\"#2-server-side-encryption-optional\" aria-label=\"2 server side encryption optional permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>2. Server Side Encryption (optional):</h3>\n<p>AWS S3 supports <a href=\"http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingServerSideEncryption.html\">server side encryption</a>. If your bucket policy requires the server side encryption header to be set, you can specify that here. Example values for this field are <code class=\"language-text\">AES256</code> or <code class=\"language-text\">aws:kms</code>.</p>\n<h3 id=\"3-path-prefix-optional\" style=\"position:relative;\"><a href=\"#3-path-prefix-optional\" aria-label=\"3 path prefix optional permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>3. Path Prefix (optional):</h3>\n<p>The file path at which your S3 events will be stored.</p>\n<p><a href=\"https://cdn.metarouter.io/web/img/docs/content/s3-event-logs3v2.png\" target=\"_mr\"><img src=\"https://cdn.metarouter.io/web/img/docs/content/s3-event-logs3v2.png\" alt=\"s3-event-logs1\"></a></p></body></html>\n    </section>\n    <div class=\"section-border\"></div>\n  "}}}