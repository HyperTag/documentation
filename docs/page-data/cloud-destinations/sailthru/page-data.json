{"componentChunkName":"component---src-templates-page-js","path":"/cloud-destinations/sailthru/","result":{"data":{"markdownRemark":{"frontmatter":{"path":"/cloud-destinations/sailthru/","title":""}}},"pageContext":{"html":"\n    <section>\n      \n    <div class=\"toc\">\n      <div class=\"toc-sticky\">\n        <h6>On this Page:</h6>\n        <ul><li><a href=\"#what-is-sailthru-and-how-does-it-work\">What is Sailthru and how does it work?</a></li> <li><a href=\"#why-send-data-to-sailthru-using-metarouter\">Why send data to Sailthru using MetaRouter?</a></li> <li><a href=\"#getting-started-with-sailthru-and-metarouter\">Getting Started with Sailthru and MetaRouter</a></li> <li><a href=\"#faq\">FAQ</a></li> <li><a href=\"#settings-1\">Settings</a></li></ul>\n      </div>\n    </div>\n  \n      <html><head></head><body><h1 id=\"sailthru\" style=\"position:relative;\" data-tags=\"cloud,destinations\"><a href=\"#\" aria-label=\"sailthru permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Sailthru</h1>\n<p>MetaRouter makes it easy to send your data to Sailthru. Once you follow the steps below, your data will be routed through our platform and pushed to Sailthru in the appropriate format.</p>\n<h2 id=\"what-is-sailthru-and-how-does-it-work\" style=\"position:relative;\"><a href=\"#what-is-sailthru-and-how-does-it-work\" aria-label=\"what is sailthru and how does it work permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>What is Sailthru and how does it work?</h2>\n<p><a href=\"https://www.sailthru.com/\">Sailthru</a> is the complete, unified and integrated marketing solution which allows purchases tracking, content personalization and email managing. You can visit their docs <a href=\"https://getstarted.sailthru.com/\">here</a>.</p>\n<h2 id=\"why-send-data-to-sailthru-using-metarouter\" style=\"position:relative;\"><a href=\"#why-send-data-to-sailthru-using-metarouter\" aria-label=\"why send data to sailthru using metarouter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Why send data to Sailthru using MetaRouter?</h2>\n<p>With MetaRouter, you can use Sailthru without having to install their JavaScript library on every page of your site. We also eliminate the need to write custom code to track user event data. Once your Sailthru is routed through MetaRouter, our platform translates page views and events into corresponding Sailthru events.</p>\n<h2 id=\"getting-started-with-sailthru-and-metarouter\" style=\"position:relative;\"><a href=\"#getting-started-with-sailthru-and-metarouter\" aria-label=\"getting started with sailthru and metarouter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Getting Started with Sailthru and MetaRouter</h2>\n<h3 id=\"initialization\" style=\"position:relative;\"><a href=\"#initialization\" aria-label=\"initialization permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Initialization</h3>\n<p>The Sailthru server-side destination will allow you to add users, send custom events and purchase events. Once you have configured a source and our MetaRouter <a href=\"/sources/analytics-js/\">snippet</a> is installed, enable and configure Sailthru as a destination and add your API Key and Shared Secret, which you can find in the Sailthru Dashboard under <strong>App Settings &gt; Setup &gt; API &amp; Postbacks</strong>.</p>\n<h3 id=\"implementation-checklist\" style=\"position:relative;\"><a href=\"#implementation-checklist\" aria-label=\"implementation checklist permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Implementation checklist</h3>\n<p><strong>Important</strong>: In order for this destination to work, you must have a few prerequisite configurations.</p>\n<ul>\n<li>You must have <code class=\"language-text\">extid</code> lookup enabled in Sailthru, which usually needs to be requested from Sailthru. This is critical to enabling full functionality.</li>\n<li>Use the <a href=\"/sources/analytics-js-ecommerce-spec/\">Ecommerce</a> event spec to track Order Completed, Order Updated, Product Added, and Product Removed.</li>\n<li>\n<p>For Product Added and Product Removed events, whether there is an <code class=\"language-text\">email</code> or not, we need to make a request to grab the items in the user&#x2019;s cart. We rely on the <code class=\"language-text\">userId</code> value for this request. It is essential that you have a <code class=\"language-text\">userId</code> on these calls, otherwise they will not make it to Sailthru.</p>\n<ul>\n<li>To trigger abandoned cart campaigns, you must pass in a <code class=\"language-text\">reminder_time</code> and <code class=\"language-text\">reminder_template</code> on the Product Added and Product Removed events.</li>\n<li>The template passed through as <code class=\"language-text\">reminder_template</code> must match the public name configured in Sailthru&#x2019;s UI.</li>\n</ul>\n</li>\n<li>We recommend appending <code class=\"language-text\">traits.email</code> whenever possible in your <code class=\"language-text\">identify</code> calls. If you send an identify call without a <code class=\"language-text\">traits.email</code> and only a <code class=\"language-text\">userId</code>, the profile will be created in Sailthru but you would not be able to find that user via their <strong>User Look Up feature</strong> or to send Product Added, Product Removed, Order Updated and Order Completed events.</li>\n</ul>\n<h3 id=\"page\" style=\"position:relative;\"><a href=\"#page\" aria-label=\"page permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Page</h3>\n<p>You must configure a <code class=\"language-text\">clientId</code> in your integration settings in order to utilize the page functionality. This value is only required for page calls and can be found in your <strong>Sailthru Dashboard</strong> under <strong>App Settings &gt; customerId</strong>.</p>\n<p>When you call page, we will hit the Sailthru page endpoint and you will see the calls populate in the Sailthru Realtime Dashboard.</p>\n<p>The <code class=\"language-text\">context.page.url</code> is also a required field for all page calls, so be sure this is present on each call. The url <strong>must</strong> be a domain name, otherwise the request will fail.</p>\n<p>We will automatically handle the proper identification of user&#x2019;s in Sailthru via the Analytics.js <code class=\"language-text\">userId</code>.</p>\n<p>Sailthru provides an out of band web scraper that will automatically collect contextual information from your pages to power their <a href=\"https://getstarted.sailthru.com/site/personalization-engine/meta-tags/\">personalization engine</a>. If the design of your site requires passing these tags to Sailthru manually (Single Page Apps are one example) you can manually pass them via a <code class=\"language-text\">tags</code> property in the page event:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">analytics<span class=\"token punctuation\">.</span><span class=\"token function\">page</span><span class=\"token punctuation\">(</span><span class=\"token string\">&apos;Page Name&apos;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  tags<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">&apos;football&apos;</span><span class=\"token punctuation\">,</span> <span class=\"token string\">&apos;new york giants&apos;</span><span class=\"token punctuation\">,</span> <span class=\"token string\">&apos;eli manning&apos;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"identify\" style=\"position:relative;\"><a href=\"#identify\" aria-label=\"identify permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Identify</h3>\n<p>When you <code class=\"language-text\">identify</code> a user, MetaRouter will pass that user&#x2019;s information to Sailthru with <code class=\"language-text\">userId</code> (or <code class=\"language-text\">anonymousId</code> if <code class=\"language-text\">userId</code> is not passed) as Sailthru&#x2019;s External User ID (<code class=\"language-text\">extid</code>). MetaRouter sends all traits as <code class=\"language-text\">vars</code> to Sailthru.</p>\n<p>MetaRouter will automatically alias users for you so if you <code class=\"language-text\">identify</code> a user who you had previously only identified with an anonymousId, we will merge the profile with <code class=\"language-text\">anonymousId</code> into a new profile with <code class=\"language-text\">userId</code> as long as you pass both <code class=\"language-text\">anonymousId</code> and <code class=\"language-text\">userId</code>.</p>\n<p>An identify event will appear in Sailthru&#x2019;s user lookup feature if there is an <code class=\"language-text\">email</code> present (Sailthru only allows a user lookup up based on an email):</p>\n<p><a href=\"https://cdn.metarouter.io/web/img/docs/content/sailthru-identify-dashboard.png\" target=\"_mr\"><img src=\"https://cdn.metarouter.io/web/img/docs/content/sailthru-identify-dashboard.png\" alt=\"sailthru-identify-dashboard\"></a></p>\n<p>Or within the <em>Users &gt; Lists</em> feature, based on the default list you configured in the Metarouter UI or passed in through the destinations object like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">analytics<span class=\"token punctuation\">.</span><span class=\"token function\">identify</span><span class=\"token punctuation\">(</span>\n  <span class=\"token string\">&apos;38472034892&apos;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">&apos;Hamurai&apos;</span><span class=\"token punctuation\">,</span>\n    email<span class=\"token operator\">:</span> <span class=\"token string\">&apos;Hamurai@gmail.com&apos;</span><span class=\"token punctuation\">,</span>\n    quote<span class=\"token operator\">:</span> <span class=\"token string\">&apos;Rick, you love those BBQs, Rick&apos;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    Sailthru<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      defaultListName<span class=\"token operator\">:</span> <span class=\"token string\">&apos;testingList&apos;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p><a href=\"https://cdn.metarouter.io/web/img/docs/content/sailtrhu-default-list-name.png\" target=\"_mr\"><img src=\"https://cdn.metarouter.io/web/img/docs/content/sailtrhu-default-list-name.png\" alt=\"sailtrhu-default-list-name\"></a></p>\n<p>You can also configure an <code class=\"language-text\">optoutValue</code> value in the MetaRouter UI, or pass in a value through the destinations object with one of the Sailthru expected values:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">analytics<span class=\"token punctuation\">.</span><span class=\"token function\">identify</span><span class=\"token punctuation\">(</span>\n  <span class=\"token string\">&apos;3242351231&apos;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">&apos;Duck With Muscles&apos;</span><span class=\"token punctuation\">,</span>\n    email<span class=\"token operator\">:</span> <span class=\"token string\">&apos;MusclesQuack@gmail.com&apos;</span><span class=\"token punctuation\">,</span>\n    quote<span class=\"token operator\">:</span> <span class=\"token string\">&apos;Oh, wow...Baby Wizard was a Parasite?!&apos;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    Sailthru<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      optoutValue<span class=\"token operator\">:</span> <span class=\"token string\">&apos;basic&apos;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>So if you send an<code class=\"language-text\">identify</code> call without a <code class=\"language-text\">traits.email</code> and only a <code class=\"language-text\">userId</code>, the profile will be created in Sailthru but you would not be able to find that user via their <strong>User Look Up</strong> feature.</p>\n<h3 id=\"track\" style=\"position:relative;\"><a href=\"#track\" aria-label=\"track permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Track</h3>\n<p>We map Product Added, Product Removed, Order Completed and Order Updated events to the <code class=\"language-text\">/purchase</code> endpoint. All other Analytics.js Ecommerce Events will be sent to the <code class=\"language-text\">/event</code> endpoint, with the same name. <strong>Important</strong>: You must have each event mapped in Sailthru within <strong>Communications &gt; Lifecycle Optimizer</strong> in order to leverage the custom event. Be sure that the <strong>Status</strong> is set to <strong>Active</strong>:</p>\n<p><a href=\"https://cdn.metarouter.io/web/img/docs/content/sailthru-lifecycle-optimizer-1.png\" target=\"_mr\"><img src=\"https://cdn.metarouter.io/web/img/docs/content/sailthru-lifecycle-optimizer-1.png\" alt=\"sailthru-lifecycle-optimizer-1\"></a></p>\n<p>Your account must have triggers or lifecycle optimizer enabled. This should be enabled when the account is setup, however, just to be sure you may need to reach out to your account representative to confirm it is enabled.</p>\n<p>A custom event will hit the <strong>Sailthru Lifecycle Optimizer</strong> feature. Navigate to <strong>Communications &gt; Lifecycle Optimizer</strong> in your Sailthru dashboard:</p>\n<p><a href=\"https://cdn.metarouter.io/web/img/docs/content/sailthru-lifecycle-optimizer-2.png\" target=\"_mr\"><img src=\"https://cdn.metarouter.io/web/img/docs/content/sailthru-lifecycle-optimizer-2.png\" alt=\"sailthru-lifecycle-optimizer-2\"></a></p>\n<p>Configure a custom event to a new flow and trigger a follow up action to the event:</p>\n<p><a href=\"https://cdn.metarouter.io/web/img/docs/content/sailthru-lifecycle-optimizer-3.png\" target=\"_mr\"><img src=\"https://cdn.metarouter.io/web/img/docs/content/sailthru-lifecycle-optimizer-3.png\" alt=\"sailthru-lifecycle-optimizer-3\"></a></p>\n<p>For instance, in the above example notice that the Registered event will add the user who trigger the event to a list.</p>\n<h3 id=\"purchases\" style=\"position:relative;\"><a href=\"#purchases\" aria-label=\"purchases permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Purchases</h3>\n<p>When you <code class=\"language-text\">track</code> an event with the name Order Completed or Order Updated using the e-commerce tracking API, we will send the products you&#x2019;ve listed to Sailthru&#x2019;s purchase log:</p>\n<p><a href=\"https://cdn.metarouter.io/web/img/docs/content/sailthru-purchase-1.png\" target=\"_mr\"><img src=\"https://cdn.metarouter.io/web/img/docs/content/sailthru-purchase-1.png\" alt=\"sailthru-purchase-1\"></a></p>\n<p>In addition, it will also appear within the user view under purchase history:</p>\n<p><a href=\"https://cdn.metarouter.io/web/img/docs/content/sailthru-purchase-2.png\" target=\"_mr\"><img src=\"https://cdn.metarouter.io/web/img/docs/content/sailthru-purchase-2.png\" alt=\"sailthru-purchase-2\"></a></p>\n<p>Note that the main identifier is <code class=\"language-text\">email</code> not <code class=\"language-text\">id</code></p>\n<p><a href=\"https://cdn.metarouter.io/web/img/docs/content/sailthru-purchase-3.png\" target=\"_mr\"><img src=\"https://cdn.metarouter.io/web/img/docs/content/sailthru-purchase-3.png\" alt=\"sailthru-purchase-3\"></a></p>\n<p>Sailthru does not allow the <code class=\"language-text\">extid</code> to be the main lookup identifier for their Purchase API. Instead, Sailthru requires an <code class=\"language-text\">email</code> as the primary identifier. MetaRouter will make a GET request to retrieve the user&#x2019;s email based on their <code class=\"language-text\">userId</code>, which is their <code class=\"language-text\">extid</code> in Sailthru.</p>\n<p>If the user and their email does not exist in Sailthru, the event will throw an error. If the user exists, the purchase will be added to their profile. Be sure to call <code class=\"language-text\">identify</code> with an <code class=\"language-text\">email</code> passed in the <code class=\"language-text\">traits</code> object prior to the Order Completed, Order Updated, Product Added and Product Removed events. If you are sending events using one of MetaRouter&#x2019;s server-side libraries and want to be sure, you can also send the email value in your <code class=\"language-text\">track</code> calls under <code class=\"language-text\">properties.email</code>.</p>\n<p>Once Order Completed is triggered, MetaRouter will pass in <code class=\"language-text\">incomplete: 0</code> to signify that the order is now complete. MetaRouter will map the following Sailthru <strong>required fields</strong> from the <strong>v2 Order Completed Spec</strong>:</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Sailthru spec</th>\n<th align=\"left\">Analytics.js spec</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\"><code class=\"language-text\">title</code></td>\n<td align=\"left\"><code class=\"language-text\">products.{}.name</code></td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">qty</code></td>\n<td align=\"left\"><code class=\"language-text\">products.{}.quantity</code></td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">price</code></td>\n<td align=\"left\"><code class=\"language-text\">products.{}.price</code></td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">id</code></td>\n<td align=\"left\"><code class=\"language-text\">products.{}.product_id</code></td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">url</code></td>\n<td align=\"left\"><code class=\"language-text\">products.{}.url</code></td>\n</tr>\n</tbody>\n</table>\n<p><strong>Note:</strong> the url field is required by Sailthru for each product. If it&#x2019;s not explicitly attached to the product, MetaRouter will pull this value out from the <code class=\"language-text\">context.page.url</code> for you, or if this value is not present, we&apos;ll use <code class=\"language-text\">productBaseUrl</code> value configured in Metarouter UI.</p>\n<p>In addition, the following optional parameters will be mapped:</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Sailthru spec</th>\n<th align=\"left\">Analytics.js spec</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\"><code class=\"language-text\">tags</code></td>\n<td align=\"left\"><code class=\"language-text\">products.{}.tags</code></td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">image_url</code></td>\n<td align=\"left\"><code class=\"language-text\">products.{}.image_url</code></td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">image_url_thumb</code></td>\n<td align=\"left\"><code class=\"language-text\">products.{}.image_url_thumb</code></td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">adjustments</code> is not a standard Analytics.js event, but we&apos;ll apply the values from <code class=\"language-text\">properties.tax</code>, <code class=\"language-text\">properties.shipping</code> and <code class=\"language-text\">properties.discount</code>.</p>\n<p>Note that purchases cannot be edited once they are posted.</p>\n<h3 id=\"purchase-confirmation\" style=\"position:relative;\"><a href=\"#purchase-confirmation\" aria-label=\"purchase confirmation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Purchase confirmation</h3>\n<p>For Order Completed events you can configure an additional <code class=\"language-text\">sendTemplate</code> parameter, which will send a transactional email for purchase confirmation. <code class=\"language-text\">sendTemplate</code> parameter must match the <strong>public name</strong> configured in Sailthru&#x2019;s UI.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">analytics<span class=\"token punctuation\">.</span><span class=\"token function\">track</span><span class=\"token punctuation\">(</span>\n  <span class=\"token string\">&apos;Order Completed&apos;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    checkout_id<span class=\"token operator\">:</span> <span class=\"token string\">&apos;skdjsidjsd23209euhdqj32kdj29j&apos;</span><span class=\"token punctuation\">,</span>\n    order_id<span class=\"token operator\">:</span> <span class=\"token string\">&apos;50314b8e9bcf000000000000&apos;</span><span class=\"token punctuation\">,</span>\n    total<span class=\"token operator\">:</span> <span class=\"token number\">21.49</span><span class=\"token punctuation\">,</span>\n    revenue<span class=\"token operator\">:</span> <span class=\"token number\">18.99</span><span class=\"token punctuation\">,</span>\n    shipping<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n    tax<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    discount<span class=\"token operator\">:</span> <span class=\"token number\">2.5</span><span class=\"token punctuation\">,</span>\n    coupon<span class=\"token operator\">:</span> <span class=\"token string\">&apos;MAYDEALS&apos;</span><span class=\"token punctuation\">,</span>\n    currency<span class=\"token operator\">:</span> <span class=\"token string\">&apos;USD&apos;</span><span class=\"token punctuation\">,</span>\n    products<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        product_id<span class=\"token operator\">:</span> <span class=\"token string\">&apos;507f1f77bcf86cd799439011&apos;</span><span class=\"token punctuation\">,</span>\n        sku<span class=\"token operator\">:</span> <span class=\"token string\">&apos;G-32&apos;</span><span class=\"token punctuation\">,</span>\n        category<span class=\"token operator\">:</span> <span class=\"token string\">&apos;Games&apos;</span><span class=\"token punctuation\">,</span>\n        name<span class=\"token operator\">:</span> <span class=\"token string\">&apos;Monopoly: 3rd Edition&apos;</span><span class=\"token punctuation\">,</span>\n        brand<span class=\"token operator\">:</span> <span class=\"token string\">&apos;Hasbro&apos;</span><span class=\"token punctuation\">,</span>\n        variant<span class=\"token operator\">:</span> <span class=\"token string\">&apos;200 pieces&apos;</span><span class=\"token punctuation\">,</span>\n        price<span class=\"token operator\">:</span> <span class=\"token number\">18.99</span><span class=\"token punctuation\">,</span>\n        quantity<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        position<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    integrations<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      Sailthru<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        sendTemplate<span class=\"token operator\">:</span> <span class=\"token string\">&apos;test-send&apos;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"abandoned-cart-events\" style=\"position:relative;\"><a href=\"#abandoned-cart-events\" aria-label=\"abandoned cart events permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Abandoned Cart Events</h3>\n<p>In addition to Order Completed events, we support the concept of <strong>Sailthru&#x2019;s Abandoned Carts</strong> via MetaRouter&#x2019;s Product Added, Product Removed and Order Updated events. When these events are triggered, MetaRouter will pass in <code class=\"language-text\">incomplete: 1</code> to signify that the order is incomplete.</p>\n<p>To leverage the functionality of sending transactional emails when a user abandons his or her cart, you must pass in a <code class=\"language-text\">reminderTime</code> and <code class=\"language-text\">reminderTemplate</code> on these events. The template passed through as <code class=\"language-text\">reminderTemplate</code> must match the <strong>public name</strong> configured in Sailthru&#x2019;s UI.</p>\n<p>If you send in a Product Added event without a valid template, Sailthru will return an error. If you send in a Product Added event with the <code class=\"language-text\">reminderTemplate</code> param, it will successfully send in and appear in the user view within their <strong>incomplete purchase cart</strong>. Some example values for <code class=\"language-text\">reminderTime</code> are 60 minutes, 24 hrs, 2 weeks. MetaRouter will handle passing in the <code class=\"language-text\">+</code> increment.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">analytics<span class=\"token punctuation\">.</span><span class=\"token function\">track</span><span class=\"token punctuation\">(</span>\n  <span class=\"token string\">&apos;Product Added&apos;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    cart_id<span class=\"token operator\">:</span> <span class=\"token string\">&apos;skdjsidjsdkdj29j&apos;</span><span class=\"token punctuation\">,</span>\n    product_id<span class=\"token operator\">:</span> <span class=\"token string\">&apos;507f1f77bcf86cd799439011&apos;</span><span class=\"token punctuation\">,</span>\n    sku<span class=\"token operator\">:</span> <span class=\"token string\">&apos;G-32&apos;</span><span class=\"token punctuation\">,</span>\n    category<span class=\"token operator\">:</span> <span class=\"token string\">&apos;Games&apos;</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">&apos;Monopoly: 3rd Edition&apos;</span><span class=\"token punctuation\">,</span>\n    brand<span class=\"token operator\">:</span> <span class=\"token string\">&apos;Hasbro&apos;</span><span class=\"token punctuation\">,</span>\n    variant<span class=\"token operator\">:</span> <span class=\"token string\">&apos;200 pieces&apos;</span><span class=\"token punctuation\">,</span>\n    price<span class=\"token operator\">:</span> <span class=\"token number\">18.99</span><span class=\"token punctuation\">,</span>\n    quantity<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    coupon<span class=\"token operator\">:</span> <span class=\"token string\">&apos;MAYDEALS&apos;</span><span class=\"token punctuation\">,</span>\n    position<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    integrations<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      Sailthru<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        reminderTemplate<span class=\"token operator\">:</span> <span class=\"token string\">&apos;abandoned cart&apos;</span><span class=\"token punctuation\">,</span>\n        reminderTime<span class=\"token operator\">:</span> <span class=\"token string\">&apos;20 minutes&apos;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>Note:</strong> All Product Added and Product Removed events going into Sailthru must have a <code class=\"language-text\">userId</code>. Sailthru must understand the state of a user&#x2019;s cart when updating an item within the cart. To understand this, MetaRouter makes a <code class=\"language-text\">get</code> request with the <code class=\"language-text\">userId</code> value to retrieve a user&#x2019;s cart.</p>\n<p>For Product Added events, we check the item added using the <code class=\"language-text\">productId</code> against the items we retrieved from Sailthru within the user&#x2019;s cart. If the item is present, we increase the quantity by one. If there are no items in the retrieved cart, we simply add the item.</p>\n<p>For Product Removed events, if the product is present, we then check the <code class=\"language-text\">qty</code>, subtracting the quantity of the one item, and add the remaining quantity back into the purchase payload. If there is only item, we remove it completely and push up the empty cart. If we fetch an empty cart, nothing happens.</p>\n<h3 id=\"settings\" style=\"position:relative;\"><a href=\"#settings\" aria-label=\"settings permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Settings</h3>\n<p>In addition to the required settings, you will have the option to configure an optout value, a product base url, a default reminder time/template, a send template and a default list name in the destination settings UI.</p>\n<h4 id=\"optout\" style=\"position:relative;\"><a href=\"#optout\" aria-label=\"optout permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Optout</h4>\n<p>The default status for the optout value is <code class=\"language-text\">none</code> or you can select <code class=\"language-text\">all</code>, <code class=\"language-text\">basic</code> or <code class=\"language-text\">blast</code>. <strong>Note:</strong> Configuring a setting other than none in your integrations settings will apply to <strong>all users</strong>. If you need to dynamically opt users in or out of emails, pass the setting as a parameter on each event.</p>\n<p><code class=\"language-text\">all</code> : Opts the user out of all emails (campaigns &amp; transactionals). This is the default status when a subscriber marks your email as spam from within an email client.</p>\n<p><code class=\"language-text\">basic</code> : This opt-out setup allows for certain communications (see some acceptable examples in the next bullet) to always send to a user &#x2013; despite their status.</p>\n<p><code class=\"language-text\">blast</code> : Opts the user out of all campaign emails. The user will still receive all transactional (1:1) emails.</p>\n<p><code class=\"language-text\">none</code> : Optout(none) is a way of revalidating users back from being any type of optout. This would only be used if an end user has previously opted out and would like to opt back in to be a valid user.</p>\n<p>You can read more about <a href=\"https://getstarted.sailthru.com/audience/managing-users/user-optout-levels/\"><strong>Optout Levels here</strong></a>.</p>\n<h4 id=\"product-base-url\" style=\"position:relative;\"><a href=\"#product-base-url\" aria-label=\"product base url permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Product Base Url</h4>\n<p>The default <code class=\"language-text\">productBaseUrl</code>, which will be used as a fallback for extracting a product url, if there is no <code class=\"language-text\">properties.url</code> for a product or <code class=\"language-text\">context.page.url</code>.</p>\n<h4 id=\"adding-users-to-a-list\" style=\"position:relative;\"><a href=\"#adding-users-to-a-list\" aria-label=\"adding users to a list permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Adding users to a list</h4>\n<p>To configure a default list name, MetaRouter exposes a setting to configure this in the UI. You can also explicitly set your own <code class=\"language-text\">defaultListName</code> through the destination option on <code class=\"language-text\">identify</code>.</p>\n<h4 id=\"reminder-time-and-remindersend-template\" style=\"position:relative;\"><a href=\"#reminder-time-and-remindersend-template\" aria-label=\"reminder time and remindersend template permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Reminder Time and Reminder/Send Template</h4>\n<p>To configure a default reminder time and template, enter the <strong>public name</strong> of your template (configured in Sailthru&#x2019;s UI) and the time frame you will want the email to send. Some example values are 60 minutes, 24 hours, 2 weeks. MetaRouter will handle passing in the <code class=\"language-text\">+</code> increment. To read more about how Sailthru calculates time, please refer to their <a href=\"https://getstarted.sailthru.com/developers/zephyr-functions-library/time/\"><strong>time documentation</strong></a>.</p>\n<h2 id=\"faq\" style=\"position:relative;\"><a href=\"#faq\" aria-label=\"faq permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>FAQ</h2>\n<h3 id=\"rate-limits\" style=\"position:relative;\"><a href=\"#rate-limits\" aria-label=\"rate limits permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Rate limits</h3>\n<p>All calls are subject to rate limits.</p>\n<ul>\n<li>For <code class=\"language-text\">identify</code> events, we hit the <code class=\"language-text\">/user</code> endpoint, which allows 300 requests/second.</li>\n<li>All others allow 40 requests/second.</li>\n<li>Limits can be raised on a case-by-case basis in order to support valid business practices. Reach out to your Sailthru account representative for more.</li>\n</ul>\n<h3 id=\"nested-traits-and-property-handling\" style=\"position:relative;\"><a href=\"#nested-traits-and-property-handling\" aria-label=\"nested traits and property handling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Nested Traits and Property Handling</h3>\n<p>Sailthru does not accept nested custom traits or properties, so by default we will flatten any custom nested properties. For example, see the below nested properties and the flattened output:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">&quot;input&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">&quot;type&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;track&quot;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">&quot;userId&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;14092348&quot;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">&quot;event&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;Played Game&quot;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">&quot;timestamp&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;2017&quot;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">&quot;properties&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">&quot;levels&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;arcade&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">&quot;blips and chitz&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">&quot;planet&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;Parblesnops&quot;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">&quot;galaxy&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">&quot;coordinates&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;1232.4832&quot;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">&quot;games&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">&quot;Roy: A life well lived&quot;</span><span class=\"token punctuation\">,</span> <span class=\"token string\">&quot;Whack a mole&quot;</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">&quot;output&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">&quot;id&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;14092348&quot;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">&quot;key&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;extid&quot;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">&quot;event&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;Played Game&quot;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">&quot;vars&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">&quot;levels0&quot;</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;levels1&quot;</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;levels2&quot;</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;arcadeblips and chitzplanet&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;Parblesnops&quot;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;arcadegalaxycoordinates&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;1232.4832&quot;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;arcadegames0&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;Roy: A life well lived&quot;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;arcadegames1&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;Whack a mole&quot;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">&quot;format&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;json&quot;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">&quot;api_key&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;xxxxxxxxx&quot;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">&quot;shared_secret&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;xxxxxxxxxx&quot;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">&quot;sig&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;70f7461c89c789688c5a0680dae6f08f&quot;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"replays\" style=\"position:relative;\"><a href=\"#replays\" aria-label=\"replays permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Replays</h3>\n<p>Note that Sailthru does not support historical replay.</p>\n<h2 id=\"settings-1\" style=\"position:relative;\"><a href=\"#settings-1\" aria-label=\"settings 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Settings</h2>\n<p>MetaRouter lets you change these destination settings via your MetaRouter dashboard without having to touch any code.</p>\n<h3 id=\"api-key\" style=\"position:relative;\"><a href=\"#api-key\" aria-label=\"api key permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>API Key</h3>\n<p>The API key found in your Sailthru dashboard.</p>\n<h3 id=\"customer-id\" style=\"position:relative;\"><a href=\"#customer-id\" aria-label=\"customer id permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Customer Id</h3>\n<p><strong>Required for page</strong> calls. This value can be found in your Sailthru Dashboard under <strong>App Settings</strong></p>\n<h3 id=\"default-list-name\" style=\"position:relative;\"><a href=\"#default-list-name\" aria-label=\"default list name permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Default List Name</h3>\n<p>Sailthru best practice dictates every user be added to a list. Configure a default here.</p>\n<h3 id=\"default-reminder-template\" style=\"position:relative;\"><a href=\"#default-reminder-template\" aria-label=\"default reminder template permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Default Reminder Template</h3>\n<p><strong>Required with Reminder Time</strong>. The <strong>public name</strong> of your template which you first must configure in Sailthru&#x2019;s UI.</p>\n<h3 id=\"default-reminder-time\" style=\"position:relative;\"><a href=\"#default-reminder-time\" aria-label=\"default reminder time permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Default Reminder Time</h3>\n<p><strong>Required with Reminder Template</strong>. The time frame you will want the email to send. <strong>YOU MUST ENTER A NUMERICAL TIME AND FIELD MINUTES, HOURS, WEEKS</strong> For example: <code class=\"language-text\">60 minutes</code>, <code class=\"language-text\">24 hours</code>, <code class=\"language-text\">2 weeks</code>. MetaRouter will handle passing in the <code class=\"language-text\">+</code> increment.</p>\n<h3 id=\"optout-status\" style=\"position:relative;\"><a href=\"#optout-status\" aria-label=\"optout status permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Optout status</h3>\n<p>Select whether to opt out users from email campaigns. The default status is <code class=\"language-text\">none</code>.</p>\n<h3 id=\"shared-secret\" style=\"position:relative;\"><a href=\"#shared-secret\" aria-label=\"shared secret permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Shared secret</h3>\n<p>The Shared Secret found in your Sailthru dashboard</p>\n<h3 id=\"product-base-url-1\" style=\"position:relative;\"><a href=\"#product-base-url-1\" aria-label=\"product base url 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Product Base Url</h3>\n<p>Fallback url, used as a fallback to interfere <code class=\"language-text\">url</code> value for products.</p>\n<h3 id=\"default-send-template\" style=\"position:relative;\"><a href=\"#default-send-template\" aria-label=\"default send template permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Default Send Template</h3>\n<p>The <strong>public name</strong> of your template which is sent when for a completed purchase. You first must configure it in Sailthru&#x2019;s UI.</p></body></html>\n    </section>\n    <div class=\"section-border\"></div>\n  "}}}