{"componentChunkName":"component---src-templates-page-js","path":"/cloud-destinations/facebook-pixel/","result":{"data":{"markdownRemark":{"frontmatter":{"path":"/cloud-destinations/facebook-pixel/","navText":"Facebook Pixel","seoTitle":null}}},"pageContext":{"html":"\n    <section>\n      \n    <div class=\"toc\">\n      <div class=\"toc-sticky\">\n        <h6>On this Page:</h6>\n        <ul><li><a href=\"#what-is-facebook-pixel-and-how-does-it-work\">What is Facebook Pixel and how does it work?</a></li> <li><a href=\"#why-send-data-to-facebook-pixel-using-metarouter\">Why send data to Facebook Pixel using MetaRouter?</a></li> <li><a href=\"#getting-started-with-facebook-pixel-and-metarouter\">Getting Started with Facebook Pixel and MetaRouter</a></li> <li><a href=\"#additional-features\">Additional Features</a></li> <li><a href=\"#settings\">Settings</a></li> <li><a href=\"#troubleshooting\">Troubleshooting</a></li> <li><a href=\"#things-to-note\">Things to note</a></li></ul>\n      </div>\n    </div>\n  \n      <html><head></head><body><h1 id=\"facebook-pixel\" style=\"position:relative;\" data-tags=\"cloud,destinations\"><a href=\"#\" aria-label=\"facebook pixel permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Facebook Pixel</h1>\n<p>MetaRouter makes it easy to send your data to Facebook Pixel. Once you follow the steps below, your data will be routed through our platform and pushed to Facebook Pixel in the appropriate format.</p>\n<p><strong>Note:</strong> MetaRouter&apos;s Facebook Pixel destination consolidates what was previously Facebook&apos;s &quot;Ads for Websites&quot; suite, which consisted of both Facebook Custom Audiences and Facebook Conversion Tracking.</p>\n<h2 id=\"what-is-facebook-pixel-and-how-does-it-work\" style=\"position:relative;\"><a href=\"#what-is-facebook-pixel-and-how-does-it-work\" aria-label=\"what is facebook pixel and how does it work permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>What is Facebook Pixel and how does it work?</h2>\n<p>Facebook Pixel is an Ad system designed for conversion optimization and lead tracking. It allows you to manage all of your ads from one platform and uses prospecting tools to target your ads to lookalike audiences. By providing this dynamic service, Facebook Pixel allows marketers to optimize cross-platform ads for custom conversions and see when users view content, search for a product, interact with their wishlist, or add payment info.</p>\n<p>Facebook Pixel uses a JavaScript Tag API to track audiences and custom user events like page visibility and page length. In order to be used, this JavaScript library must be added to every page of your site. It has a standard set of natively-integrated events such as product views, adds to cart, and purchases. While extremely extensible, tracking dynamic data like sku, name, and price from your database will require that custom code be added to your site.</p>\n<h2 id=\"why-send-data-to-facebook-pixel-using-metarouter\" style=\"position:relative;\"><a href=\"#why-send-data-to-facebook-pixel-using-metarouter\" aria-label=\"why send data to facebook pixel using metarouter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Why send data to Facebook Pixel using MetaRouter?</h2>\n<p>With MetaRouter, you can use Facebook Pixel without having to install their JavaScript library on every page of your site. We also eliminate the need to write custom code to track user event data. Once your Facebook Pixel is routed through MetaRouter, our platform translates page views and events into corresponding Facebook Pixel events.</p>\n<h2 id=\"getting-started-with-facebook-pixel-and-metarouter\" style=\"position:relative;\"><a href=\"#getting-started-with-facebook-pixel-and-metarouter\" aria-label=\"getting started with facebook pixel and metarouter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Getting Started with Facebook Pixel and MetaRouter</h2>\n<h3 id=\"facebook-pixel-side\" style=\"position:relative;\"><a href=\"#facebook-pixel-side\" aria-label=\"facebook pixel side permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Facebook Pixel Side</h3>\n<p>To get started with this integration, you&apos;ll first need to create a Facebook for Business account. <a href=\"https://www.facebook.com/business/a/online-sales/custom-audiences-website\">Follow the instructions</a> for creating a Pixel.</p>\n<p>You&apos;ll only create one pixel for your site (typically labeled with the name of your business). This pixel will <a href=\"https://www.facebook.com/business/help/1686199411616919\">replace all the functionality</a> previously given to Facebook Audiences and Facebook Conversions (as well as allowing some additional features, such as custom conversions).</p>\n<p><a href=\"https://cdn.metarouter.io/web/img/docs/content/facebook-pixel1.png\" target=\"_mr\"><img src=\"https://cdn.metarouter.io/web/img/docs/content/facebook-pixel1.png\" alt=\"facebook-pixel1\"></a></p>\n<p>Once that&apos;s set up, identify your unique <code class=\"language-text\">pixelId</code>, a 15 digit number that uniquely identifies your site.</p>\n<h3 id=\"metarouter-side\" style=\"position:relative;\"><a href=\"#metarouter-side\" aria-label=\"metarouter side permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>MetaRouter Side</h3>\n<p>Put your Facebook Pixel ID into your MetaRouter account and give your new connection a unique name.</p>\n<p>With that, just click Save to activate your pipeline.</p>\n<h2 id=\"additional-features\" style=\"position:relative;\"><a href=\"#additional-features\" aria-label=\"additional features permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Additional Features</h2>\n<p><strong>Standard Events</strong></p>\n<p>Facebook has nine <a href=\"https://www.facebook.com/business/a/add-pixel-standard-events\">Standard Events</a>, which are predefined within the Facebook for Business platform.</p>\n<p>To connect your events to these predefined ones within Facebook, just input the name of the MetaRouter event and choose the appropriate Standard Facebook Event that corresponds to it.</p>\n<p><a href=\"https://cdn.metarouter.io/web/img/docs/content/facebook-pixel3v2.png\" target=\"_mr\"><img src=\"https://cdn.metarouter.io/web/img/docs/content/facebook-pixel3v2.png\" alt=\"facebook-pixel3\"></a></p>\n<p><strong>Conversion Pixel ID</strong></p>\n<p>If you are using the Facebook Pixel integration as a replacement for Conversion Pixels as well, put each <strong>Conversion Pixel ID</strong> into your MetaRouter account next to the corresponding event in MetaRouter that you&apos;ve already set up. Make sure you include all capitals letters and spaces used in your event labels.</p>\n<p><a href=\"https://cdn.metarouter.io/web/img/docs/content/facebook-pixel4v2.png\" target=\"_mr\"><img src=\"https://cdn.metarouter.io/web/img/docs/content/facebook-pixel4v2.png\" alt=\"facebook-pixel4\"></a></p>\n<p><strong>Send all Events as Single Events</strong></p>\n<p>Enabling this will force FB Pixel events triggered by MetaRouter to fire in <code class=\"language-text\">trackSingle</code> / <code class=\"language-text\">trackSingleCustom</code> mode to prevent them from going to other FB Pixels loaded on the page. This is helpful if there are different team managing their own pixel, or if you have installed Analytics.js on a site with an existing pixel.</p>\n<p>You can find out more about the specific use-case and benefits from this <a href=\"https://developers.facebook.com/ads/blog/post/2017/11/28/event-tracking-with-multiple-pixels-tracksingle/\">Facebook Developers article</a>.</p>\n<h2 id=\"settings\" style=\"position:relative;\"><a href=\"#settings\" aria-label=\"settings permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Settings</h2>\n<h3 id=\"map-categories-to-fb-content-types\" style=\"position:relative;\"><a href=\"#map-categories-to-fb-content-types\" aria-label=\"map categories to fb content types permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Map Categories to FB Content Types</h3>\n<p>If you&#x2019;re using real estate, travel, or automotive <a href=\"https://www.facebook.com/business/learn/facebook-create-ad-dynamic-ads\">Dynamic Ads</a> you can map <code class=\"language-text\">category</code> values to <code class=\"language-text\">content_type</code> values. For example, you might map the category &#x201C;cars&#x201D; to the &#x201C;vehicle&#x201D; content type so Facebook promotes relevant vehicles from your catalog. To understand which content types you can map to, consult the <a href=\"https://developers.facebook.com/docs/marketing-api/dynamic-ad\">Facebook Dynamic Ads</a> documentation.</p>\n<p>For most implementations we recommend leaving these mappings blank. By default, we&#x2019;ll set content_type to &#x201C;product&#x201D;.</p>\n<h3 id=\"blacklist-pii-properties\" style=\"position:relative;\"><a href=\"#blacklist-pii-properties\" aria-label=\"blacklist pii properties permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Blacklist PII Properties</h3>\n<p>Facebook has a strict policy prohibiting any personally identifiable information (PII) from being sent as properties of events to their API. By default, this integration will scan <code class=\"language-text\">track</code> events for <a href=\"/cloud-destinations/facebook-pixel/#blacklist-pii-properties\">these</a> properties and strip them from the payload that gets sent to Facebook. If your events contain other properties with PII values, you can use this setting to append to this default list. You can also use this setting to optionally hash any PII values instead of dropping them.</p>\n<h3 id=\"client-side-only-advanced-match-trait-key-for-external-id\" style=\"position:relative;\"><a href=\"#client-side-only-advanced-match-trait-key-for-external-id\" aria-label=\"client side only advanced match trait key for external id permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Client-Side Only: Advanced Match Trait Key for External ID</h3>\n<p>Please indicated a user trait key which you would like MetaRouter to use to send an <code class=\"language-text\">external_id</code> to Facebook Pixel using advanced matching. MetaRouter will use the value of this trait to map it to Facebook Pixel&#x2019;s <code class=\"language-text\">external_id</code>.</p>\n<h3 id=\"legacy-conversion-pixel-ids\" style=\"position:relative;\"><a href=\"#legacy-conversion-pixel-ids\" aria-label=\"legacy conversion pixel ids permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Legacy Conversion Pixel IDs</h3>\n<p>These are your <a href=\"https://developers.facebook.com/docs/facebook-pixel/implementation/custom-audiences\">deprecated</a> Conversion Pixel IDs from Facebook Conversion Tracking. Facebook will still accept data in this format, though it&#x2019;s no longer possible to create conversion Pixel IDs. Now you create conversions based on standard and custom events inside their interface. Enter your event name in the left column and your pixel ID in the right column.</p>\n<h3 id=\"map-your-events-to-standard-fb-events\" style=\"position:relative;\"><a href=\"#map-your-events-to-standard-fb-events\" aria-label=\"map your events to standard fb events permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Map Your Events to Standard FB Events</h3>\n<p>Enter your event on the left, and the Facebook standard event to map to on the right. Facebook recognizes certain <a href=\"https://developers.facebook.com/docs/marketing-api/audiences-api/pixel#standardevents\">standard events</a> that can be used across Custom Audiences, custom conversions, conversion tracking, and conversion optimization. When you map an event to a standard Facebook event, we&#x2019;ll send the event by that name. Any unmapped events will still be sent as Custom Events.</p>\n<h3 id=\"pixel-id\" style=\"position:relative;\"><a href=\"#pixel-id\" aria-label=\"pixel id permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Pixel ID</h3>\n<p>Your Pixel ID, from the snippet created on the <a href=\"https://www.facebook.com/ads/manager/pixel/facebook_pixel/\">Facebook Pixel creation page</a>.</p>\n<h3 id=\"standard-events-custom-properties\" style=\"position:relative;\"><a href=\"#standard-events-custom-properties\" aria-label=\"standard events custom properties permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Standard Events custom properties</h3>\n<p>Add here all the custom properties you want to send as part of your Standard Events (Order Completed, Checkout Started, etc) as <code class=\"language-text\">property name</code>.</p>\n<h3 id=\"use-userid-or-anonymous-id-as-external-id\" style=\"position:relative;\"><a href=\"#use-userid-or-anonymous-id-as-external-id\" aria-label=\"use userid or anonymous id as external id permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Use UserId or Anonymous Id as External Id</h3>\n<p>Enable this setting if you want to send, <code class=\"language-text\">userId</code> (or <code class=\"language-text\">anonymousId</code> if not present) as external Id to Facebook.</p>\n<h3 id=\"value-field-identifier\" style=\"position:relative;\"><a href=\"#value-field-identifier\" aria-label=\"value field identifier permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Value Field Identifier</h3>\n<p>For pre-purchase events such as <code class=\"language-text\">Product Viewed</code> and <code class=\"language-text\">Product Added</code>, choose which MetaRouter property you would like to map to Facebook&#x2019;s value property.</p>\n<h3 id=\"whitelist-pii-properties\" style=\"position:relative;\"><a href=\"#whitelist-pii-properties\" aria-label=\"whitelist pii properties permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Whitelist PII Properties</h3>\n<p>By default, MetaRouter will strip any PII from the properties of <code class=\"language-text\">track</code> events that get sent to Facebook. If you would like to override this functionality, you can input each property you would like to whitelist as a line item in this setting. <strong>Please reference our <a href=\"/cloud-destinations/facebook-pixel/#blacklist-pii-properties\">documentation</a> for the exact property names we filter out.</strong></p>\n<h2 id=\"troubleshooting\" style=\"position:relative;\"><a href=\"#troubleshooting\" aria-label=\"troubleshooting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Troubleshooting</h2>\n<h3 id=\"pii-blacklisting\" style=\"position:relative;\"><a href=\"#pii-blacklisting\" aria-label=\"pii blacklisting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>PII Blacklisting</h3>\n<p>Facebook enforces strict guidelines around sending Personally Identifiable Information (PII) as properties of Pixel events. In order to adhere to these guidelines, MetaRouter will automatically scan <code class=\"language-text\">track</code> event properties for PII and remove any that get flagged from the event to Facebook. The following keys are currently filtered:</p>\n<ul>\n<li><code class=\"language-text\">email</code></li>\n<li><code class=\"language-text\">firstName</code></li>\n<li><code class=\"language-text\">lastName</code></li>\n<li><code class=\"language-text\">gender</code></li>\n<li><code class=\"language-text\">city</code></li>\n<li><code class=\"language-text\">country</code></li>\n<li><code class=\"language-text\">phone</code></li>\n<li><code class=\"language-text\">state</code></li>\n<li><code class=\"language-text\">zip</code></li>\n<li><code class=\"language-text\">birthday</code></li>\n</ul>\n<p>Any <code class=\"language-text\">track</code> events with properties containing those keys will be sent to Facebook with those properties omitted.</p>\n<p>If you have events that use any of those keys for non-PII properties, you can manually whitelist them using the <strong>Whitelist PII Properties</strong> setting. You may also add to this list and/or optionally hash blacklisted properties with the <strong>Blacklist PII Properties</strong> setting.</p>\n<h3 id=\"inconsistent-or-missing-conversions\" style=\"position:relative;\"><a href=\"#inconsistent-or-missing-conversions\" aria-label=\"inconsistent or missing conversions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Inconsistent or Missing Conversions</h3>\n<p>The most common reason for Facebook conversion pixels to fire inconsistently is that the page redirects or reloads before the pixel has time to be loaded on the page. Make sure your page does not redirect or reload for at least 300ms after the conversion event happens. In some cases a delay of 500ms is necessary.</p>\n<p>We recommend using our <code class=\"language-text\">trackLink</code> or <code class=\"language-text\">trackForm</code> helpers to delay the page redirect. You can extend the delay by setting the timeout to 500ms.</p>\n<h3 id=\"extra-or-duplicate-conversions\" style=\"position:relative;\"><a href=\"#extra-or-duplicate-conversions\" aria-label=\"extra or duplicate conversions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Extra or Duplicate Conversions</h3>\n<p>This may be due to conversion events being sent from your development, staging, or testing environments. We recommend setting up separate source for each environment. That way you can either point events to test conversion pixels in Facebook Conversion Tracking or turn off Facebook Conversion Tracking completely in non-production environments.</p>\n<p>Double check that your mapped conversion events aren&#x2019;t happening anywhere else on your site. If the user reloads the conversion page or re-triggers the tracked event they may be double counted.</p>\n<p>Facebook&#x2019;s conversion reports count view-through conversions as well as click-through conversions by default. You can change that setting inside Facebook Conversion Tracking in the report attribution settings.</p>\n<h3 id=\"facebook-conversions-not-matching-google-analytics\" style=\"position:relative;\"><a href=\"#facebook-conversions-not-matching-google-analytics\" aria-label=\"facebook conversions not matching google analytics permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Facebook Conversions Not Matching Google Analytics</h3>\n<p>Facebook counts conversions per person, as opposed to Google Analytics which counts per browser cookie session (unless you&#x2019;re using <a href=\"/cloud-destinations/google-analytics/#user-id\">Google Analytics User-ID</a>.</p>\n<p>If someone saw or clicked on your ad on a mobile phone then later came back directly to purchase on a desktop machine Google Analytics wouldn&#x2019;t know that this was the same person, but Facebook would. In that scenario Google Analytics counts 2 unique visits with a conversion last attributed to a direct visit on desktop. Facebook counts one conversion with the conversion properly attributed to the last ad click/view on mobile.</p>\n<h2 id=\"things-to-note\" style=\"position:relative;\"><a href=\"#things-to-note\" aria-label=\"things to note permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Things to note</h2>\n<h3 id=\"what-happens-to-revenue-when-an-event-goes-to-facebook\" style=\"position:relative;\"><a href=\"#what-happens-to-revenue-when-an-event-goes-to-facebook\" aria-label=\"what happens to revenue when an event goes to facebook permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>What happens to revenue when an event goes to Facebook?</h3>\n<p>When our platform receives the <code class=\"language-text\">revenue</code> property within our schema, it will automatically map it to <a href=\"https://www.facebook.com/business/help/392174274295227\">Facebook Pixel&apos;s value property</a>. This is to ensure that Facebook does not ignore any standard <code class=\"language-text\">revenue</code> property that would be in your events natively following our specification. Alternatively, including only <code class=\"language-text\">value</code> with eCommerce events will not make it to Facebook Pixel, as it doesn&apos;t match our specification it will not be mapped to the Facebook Pixel event properly.</p></body></html>\n    </section>\n    <div class=\"section-border\"></div>\n  "}}}