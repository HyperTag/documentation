{"componentChunkName":"component---src-templates-page-js","path":"/enterprise-edition/","result":{"data":{"markdownRemark":{"frontmatter":{"path":"/enterprise-edition/","navText":"Overview","seoTitle":"MetaRouter Enterprise"}}},"pageContext":{"html":"\n    <section>\n      \n    <div class=\"toc\">\n      <div class=\"toc-sticky\">\n        <h6>In this Section:</h6>\n        <ul><li><a href=\"#data-streaming-on-your-own-terms\">Data Streaming on your own terms</a></li> <li><a href=\"#the-data-streaming-engine\">The Data Streaming Engine</a></li> <li><a href=\"#customization\">Customization</a></li></ul>\n      </div>\n    </div>\n  \n      <html><head></head><body><h1 class=\"enterprise section-anchor\" id>MetaRouter Enterprise</h1>\n<a href=\"https://cdn.metarouter.io/web/img/docs/enterprise-logo-light.png\" target=\"_mr\"><img class=\"content-logo\" src=\"https://cdn.metarouter.io/web/img/docs/enterprise-logo-light.png\"></a>\n<h2 id=\"data-streaming-on-your-own-terms\" style=\"position:relative;\"><a href=\"#data-streaming-on-your-own-terms\" aria-label=\"data streaming on your own terms permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Data Streaming on your own terms</h2>\n<p>MetaRouter Enterprise is a private, cloud-agnostic, streaming data platform designed for companies with sensitive data or who aim for full control of their data ingestion. Deploy an end-to-end data router on your own cloud, maximizing control, flexibility, and security.</p>\n<p>With support for a variety of Destinations, MetaRouter Enterprise leverages Kubernetes to allow all of your streaming data processing to happen in one place.</p>\n<p><strong>Learn More:</strong> <a href=\"https://www.metarouter.io/#about\">Here</a></p>\n<h1 id=\"architecture\" style=\"position:relative;\"><a href=\"#architecture\" aria-label=\"architecture permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Architecture</h1>\n<h2 id=\"the-data-streaming-engine\" style=\"position:relative;\"><a href=\"#the-data-streaming-engine\" aria-label=\"the data streaming engine permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>The Data Streaming Engine</h2>\n<p>The primary component of our platform, consisting of three distinct layers of services, that allows for the real-time ingestion, durable processing, and monitored delivery of data from your applications.</p>\n<p><a href=\"/images/platform_overview.png\" target=\"_mr\"><img src=\"/images/platform_overview.png\" alt=\"MetaRouter Overview\"></a></p>\n<p><strong>Layer 1: Ingestion</strong> - A high performance API, only outwardly facing component of the platform, that accepts the incoming data from your sources to write into durable stateful message queues.</p>\n<p><strong>Layer 2: Routing</strong> - Syndicates event processing among Layer 3 to ensure the sending of data to it&#x2019;s destination based on the configuration you provide for that individual source.</p>\n<p><strong>Layer 3: Forwarding</strong> - Handles mapping the data schema implemented within your sources to that of the proprietary format you want the event sent to and tracks sending success to destinations outside of platform.</p>\n<p>As with all of our Clickstream products, you only have to implement a centralized schema for the data you want tracked and the platform handles validation and parsing of that data to match the requirements of all of the distinct services that you want to receive that data.</p>\n<h2 id=\"customization\" style=\"position:relative;\"><a href=\"#customization\" aria-label=\"customization permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Customization</h2>\n<p>The design of MetaRouter Enterprise is modular and allows for an unprecedented amount of flexibility when it comes to real-time streaming data processors. It can sit downstream from existing APIs to receive data or feed data directly to your own internal data processors.</p>\n<p>Each deployment supports multi-tenancy out of the box, allowing you to implement tracking with a variety of data sources and map their data distinctly based on the configurations you set for that specific instance.</p></body></html>\n    </section>\n    <div class=\"section-border\"></div>\n  \n    <section>\n      \n    <div class=\"toc\">\n      <div class=\"toc-sticky\">\n        <h6>In this Section:</h6>\n        <ul><li><a href=\"#kubernetes\">Kubernetes</a></li> <li><a href=\"#load-balancer\">Load Balancer</a></li> <li><a href=\"#message-queues\">Message Queues</a></li></ul>\n      </div>\n    </div>\n  \n      <html><head></head><body><h1 id=\"requirements\" style=\"position:relative;\" class=\"section-anchor\"><a href=\"#requirements\" aria-label=\"resource requirements permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Resource Requirements</h1>\n<h2 id=\"kubernetes\" style=\"position:relative;\"><a href=\"#kubernetes\" aria-label=\"kubernetes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Kubernetes</h2>\n<h3 id=\"minimum-node-resources\" style=\"position:relative;\"><a href=\"#minimum-node-resources\" aria-label=\"minimum node resources permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Minimum Node Resources</h3>\n<p>We recommend that you have at least 3 nodes that each offer 4 CPU Cores and 16 GB of Memory per zone, and that you have at least 2 zones that your cluster is available from (to reduced the change of downtime from your Cloud provider) in order to support a majority of traffic with just the core platform.</p>\n<p>Also, for every Destination you want supported, have an additional .5 CPU Core and 1GB Mem. available per region for every 1,000 events/sec for your peak expected traffic.</p>\n<p>The minimum recommended size of our platform is, per zone:</p>\n<ul>\n<li>3x Load Balancer (.25 CPU, .5 MEM)</li>\n<li>3x Ingestors (.25 CPU, .25 MEM)</li>\n<li>2x Routers (.25 CPU, .5 MEM)</li>\n<li>1x Forwarder per Destination (.5 CPU, 1 MEM)</li>\n</ul>\n<h3 id=\"calculating-scaling\" style=\"position:relative;\"><a href=\"#calculating-scaling\" aria-label=\"calculating scaling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Calculating Scaling</h3>\n<p>The platform is set to automatically scale to meet event demand, so if you expect a large range of events or ever-increasing peaks of traffic, please leave plenty of headroom or set your cluster to autoscale.</p>\n<p>The Load Balancer, Ingestor and Router will each autoscale roughly by one pod for every 1,000 events/sec over the minimum rate.</p>\n<p>To calculate the amount of Forwarders you will need, take the amount of Destinations you want the platform to support and multiply it by the amount of events per second you expect at peak volume. Then, compare it against the amount of Destinations and take the higher number.</p>\n<p>For example, if I want to support Google Analytics, Facebook Pixel, and Pinterest on my platform only, and I expect 500 events/sec. Then, I would expect 3 Forwarders.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(3*(500/1000)) = 1.5 &lt; 3</code></pre></div>\n<p>However, supporting those 3 Destinations at 5000 events/sec, I should expect to need 15 Forwarders to handle that traffic.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(3*(5000/1000)) = 15 &gt; 3</code></pre></div>\n<h3 id=\"supported-cloud-providers\" style=\"position:relative;\"><a href=\"#supported-cloud-providers\" aria-label=\"supported cloud providers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Supported Cloud Providers</h3>\n<p><strong>Currently Verified Kubernetes Providers</strong>:</p>\n<ul>\n<li>Google Cloud Platform (GCP)</li>\n<li>Amazon Web Services (AWS)</li>\n</ul>\n<p><strong>Coming Soon</strong>:</p>\n<ul>\n<li>Digital Ocean (DO)</li>\n<li>Microsoft Azure</li>\n</ul>\n<h2 id=\"load-balancer\" style=\"position:relative;\"><a href=\"#load-balancer\" aria-label=\"load balancer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Load Balancer</h2>\n<p>Our platform will spin up an internal Load Balancer and connect it with your Cloud Provider which, depending on your Cloud Provider, may create ingress rules or spin up resources that are represented outside of Kubernetes. The only manual step that is currently required is for you to link the DNS records to Ingress instances created for the Load Balancer, as our platform takes care of the rest. <a href=\"https://kubernetes.io/docs/concepts/services-networking/ingress/\">Learn more about how Kubernetes leverages Ingress with Cloud Providers on their Docs</a>.</p>\n<h2 id=\"message-queues\" style=\"position:relative;\"><a href=\"#message-queues\" aria-label=\"message queues permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Message Queues</h2>\n<p>We support connecting our services between different Stateful Message Queues in order to provide data durability and allow for finer connecting control for you to send data to other parts of your platform.</p>\n<p><strong>Our currently supported queues are:</strong></p>\n<ul>\n<li>Confluent Kafka</li>\n<li>AWS Kafka (MSK)</li>\n<li>Google PUB/SUB</li>\n</ul>\n<p><strong>Coming Soon</strong>:</p>\n<ul>\n<li>Azure Service Bus (planned)</li>\n<li>AWS Kinesis (planned)</li>\n<li>NATS (investigating)</li>\n<li>Pulsar (investigating)</li>\n</ul>\n<p>Although we do not have current support for queues managed from within the platform, we are planning to introduce it this year. This will prevent you from having to link any externally provided services, however the total amount of resources needed will be much higher.</p>\n<!-- # Example Resource Calculations\n\nHere are some examples of resource calculations for our platform.\n\n\n## Scenario 1: Peak of 170k events/hour going to 3 Destinations\nLet’s say we have a Website and a iOS app that generate 35M events a month combined, and our peak traffic is 180k events/hour. This is just under the traffic that is supported by the minimum recommendations. Each event’s average size is\n\n**Kubernetes Resources:**\n\n- 3 Nodes (4 Core, 16 Mem) over two regions: 24 Core, 96 Mem\n- 3 Destinations (1 Core, 4 Mem) over two regions: 6 Core, 24 Mem\n\nTotal resources needed for MetaRouter Enterprise: 30 CPU Cores, 120 GB Mem.\n\n**Load Balancer Resources:**\nEach of our events average 0.5 KB in size, resulting in a total of 17.5 GB of data coming into our Load Balancer each month.\n\n**Message Queue Resources:**\nWe will be using an externally managed message queue that charges based off of data volume and retention. We recommend at 7 days of a retention period to act as a cache in case there are downstream issues you have to replay data for.\n\nWe will have one Topic for the platform and an additional topic per destination. Since we’ve configured each events to go to all three Destinations on the platform, that means the one 0.5 KB event is sent into 4 topics and that 2 KB of data is retained for a period of 7 days.\n\nOver a month, that adds up to 17.5 GB of data processed, but only 4.4 GB of data stored (due to older data aging out) for 35M messages. --></body></html>\n    </section>\n    <div class=\"section-border\"></div>\n  \n    <section>\n      \n    <div class=\"toc\">\n      <div class=\"toc-sticky\">\n        <h6>In this Section:</h6>\n        <ul><li><a href=\"#cloud-provider-prerequisites\">Cloud Provider Prerequisites</a></li> <li><a href=\"#kubernetes-prerequisites\">Kubernetes Prerequisites</a></li> <li><a href=\"#message-queue-preparations\">Message Queue Preparations</a></li> <li><a href=\"#what-you-will-need\">What you will need</a></li> <li><a href=\"#step-1-create-install-directory\">Step 1: Create Install Directory</a></li> <li><a href=\"#step-2-run-the-installation-script\">Step 2: Run the Installation Script</a></li> <li><a href=\"#step-3-installing-the-platform\">Step 3: Installing the platform</a></li> <li><a href=\"#installation-complete\">Installation complete</a></li> <li><a href=\"#manual-updates\">Manual Updates</a></li> <li><a href=\"#automated-stable-updates\">Automated Stable Updates</a></li></ul>\n      </div>\n    </div>\n  \n      <html><head></head><body><h1 id=\"installation\" style=\"position:relative;\" class=\"section-anchor\"><a href=\"#installation\" aria-label=\"before enterprise platform installation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Before Enterprise Platform Installation</h1>\n<h2 id=\"cloud-provider-prerequisites\" style=\"position:relative;\"><a href=\"#cloud-provider-prerequisites\" aria-label=\"cloud provider prerequisites permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Cloud Provider Prerequisites</h2>\n<h3 id=\"google-cloud-gcp\" style=\"position:relative;\"><a href=\"#google-cloud-gcp\" aria-label=\"google cloud gcp permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Google Cloud (GCP)</h3>\n<p>For a proper DNS setup, our platform will require a Static IP to be assigned to it. First, reserve a Static IP (Found in GCP &gt; Networking &gt; VPC Network &gt; External IP Addresses) and note the IP Address. This will be needed during the installation process.</p>\n<h3 id=\"amazon-web-services-aws\" style=\"position:relative;\"><a href=\"#amazon-web-services-aws\" aria-label=\"amazon web services aws permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Amazon Web Services (AWS)</h3>\n<p><strong>Note:</strong> This is a stub of an existing feature. Details coming soon.</p>\n<h2 id=\"kubernetes-prerequisites\" style=\"position:relative;\"><a href=\"#kubernetes-prerequisites\" aria-label=\"kubernetes prerequisites permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Kubernetes Prerequisites</h2>\n<p>Create the namespace for the platform. We recommend creating a namespace that will be used solely by the MetaRouter Platform:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl create namespace mr-ee</code></pre></div>\n<h3 id=\"install-tiller\" style=\"position:relative;\"><a href=\"#install-tiller\" aria-label=\"install tiller permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Install Tiller</h3>\n<p>Prep cluster for installation of Tiller</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl -n kube-system create serviceaccount tiller\n\nkubectl create clusterrolebinding tiller --clusterrole cluster-admin --serviceaccount<span class=\"token operator\">=</span>kube-system:tiller</code></pre></div>\n<p>Start Tiller</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">helm init --service-account tiller</code></pre></div>\n<p>Then, verify tiller is there with:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl get pods --namespace kube-system</code></pre></div>\n<h3 id=\"adding-custom-definitions\" style=\"position:relative;\"><a href=\"#adding-custom-definitions\" aria-label=\"adding custom definitions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Adding Custom Definitions</h3>\n<p>Ensure Cluster has access to cert-manager definitions</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl apply -f https://raw.githubusercontent.com/jetstack/cert-manager/release-0.6/deploy/manifests/00-crds.yaml</code></pre></div>\n<h2 id=\"message-queue-preparations\" style=\"position:relative;\"><a href=\"#message-queue-preparations\" aria-label=\"message queue preparations permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Message Queue Preparations</h2>\n<h3 id=\"topic-creation\" style=\"position:relative;\"><a href=\"#topic-creation\" aria-label=\"topic creation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Topic Creation</h3>\n<p>The EE Platform uses topics to pass events from one stage of the service to another. The topic from the first to second stage is called <code class=\"language-text\">main</code>, and from the second to the third stage are named after the destination they send events into (in kebab-case.)</p>\n<p>For example, if I want the platform to send events to Google Analytics, Adobe Analytics and Pinterest, I would need to create the following topics:</p>\n<ul>\n<li><code class=\"language-text\">main</code></li>\n<li><code class=\"language-text\">google-analytics</code></li>\n<li><code class=\"language-text\">adobe-analytics</code></li>\n<li><code class=\"language-text\">pinterest</code></li>\n</ul>\n<p>To ensure the uniqueness of the names, if the Message Queue is shared by other applications, we recommend supplying a Topic Prefix to the platform upon installation. By adding a prefix to be used by the platform, you will need to ensure that topics exists for the existing naming convention with the prefix you specified. For example, if I use the default Topic Prefix of <code class=\"language-text\">mr-ee</code> I will need to make the following topics:</p>\n<ul>\n<li><code class=\"language-text\">mr-ee-main</code></li>\n<li><code class=\"language-text\">mr-ee-google-analytics</code></li>\n<li><code class=\"language-text\">mr-ee-adobe-analytics</code></li>\n<li><code class=\"language-text\">mr-ee-pinterest</code></li>\n</ul>\n<p>We recommend always specifying a prefix to future-proof any shared resources.</p>\n<h3 id=\"custom-topics\" style=\"position:relative;\"><a href=\"#custom-topics\" aria-label=\"custom topics permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Custom Topics</h3>\n<p>If you desire the router to send a copy of events to a Topic you will manually read from, you will need to push a custom Destination for your Write Key into the Configuration Store. Keep in mind that whatever you add here will have the same prefix added as specified in the Topic Names section above.</p>\n<p>For example, if you have the prefix <code class=\"language-text\">mr-ee-</code> and add <code class=\"language-text\">logs</code> as a destination, the Router will write to the Topic <code class=\"language-text\">mr-ee-logs</code>.</p>\n<p>We only create Event Forwarders based on the values used to install or update the platform, so there is no need to worry about an additional service spinning up to consume messages. However, we do recommend ensuring that the naming is unique and will not clash with future updates of us making additional destinations available. Stay away from names that describe third-party services or message delivery types, such as <code class=\"language-text\">amazon-kinesis</code> or <code class=\"language-text\">redis</code> as they may conflict in the future and require further customization to support.</p>\n<h3 id=\"partition-creation\" style=\"position:relative;\"><a href=\"#partition-creation\" aria-label=\"partition creation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Partition Creation</h3>\n<p>If supported by your Message Queue of choice, such as Kafka or Kinesis, Partitions allow for multiple services in each group to read events simultaneously. You will want to have, at least, a 1:1 ratio for partitions to consumers. We recommend assuming a 3:1 ratio of partitions to consumers to allow for the easy scaling of consumers.</p>\n<p>Our minimal production size is two Routers and one of each Forwarder. An example of partitions, according to our recommendation, is as follows:</p>\n<ul>\n<li><code class=\"language-text\">main</code>: 6 Partitions</li>\n<li><code class=\"language-text\">google-analytics</code>: 3 Partitions</li>\n<li><code class=\"language-text\">adobe-analytics</code>: 3 Partitions</li>\n<li><code class=\"language-text\">pinterest</code>: 3 Partitions</li>\n</ul>\n<h1 id=\"installation-of-the-platform\" style=\"position:relative;\"><a href=\"#installation-of-the-platform\" aria-label=\"installation of the platform permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Installation of the Platform</h1>\n<h2 id=\"what-you-will-need\" style=\"position:relative;\"><a href=\"#what-you-will-need\" aria-label=\"what you will need permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>What you will need</h2>\n<ol>\n<li>Kubernetes and Helm installed and configured on your computer</li>\n<li>Docker installed and configured on your computer</li>\n<li>Operational access to your Kubernetes Cluster</li>\n<li>The domain(s) you will use for sending events, pointing to the Static IP/Load Balancer created in the <strong>Cloud Provider Prerequisites &gt; Networking</strong> section.</li>\n</ol>\n<h2 id=\"step-1-create-install-directory\" style=\"position:relative;\"><a href=\"#step-1-create-install-directory\" aria-label=\"step 1 create install directory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Step 1: Create Install Directory</h2>\n<p>Create a new folder or directory on your local system. Our installation process will generate files into this directory for you to use Helm for the final installation of the platform.</p>\n<h2 id=\"step-2-run-the-installation-script\" style=\"position:relative;\"><a href=\"#step-2-run-the-installation-script\" aria-label=\"step 2 run the installation script permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Step 2: Run the Installation Script</h2>\n<p>Using your terminal, navigate into the directory you created in Step 1. Then, run the installation script we&apos;ve provided you, passing along the License Key (one per contracted platform instance) once the installation process asks for it. After, providing the Key, the rest of the installation will continue over your web browser. Follow the on-screen instructions to finishing the configuration of your platform&apos;s details.</p>\n<h2 id=\"step-3-installing-the-platform\" style=\"position:relative;\"><a href=\"#step-3-installing-the-platform\" aria-label=\"step 3 installing the platform permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Step 3: Installing the platform</h2>\n<p>Once the installation is complete, the directory you created in Step 1 will now have all of our platform charts, customized to your instructions, within it. Run <code class=\"language-text\">helm install metarouter-enterprise -f ./metarouter-ee.yaml --name &lt;RELEASE&gt; --namespace &lt;NAMESPACE&gt;</code> to install the platform into Kubernetes, replacing <code class=\"language-text\">&lt;RELEASE&gt;</code> with the name you would like to use to reference the platform (we recommend <code class=\"language-text\">ee</code> for just the one deployment) and replacing <code class=\"language-text\">&lt;NAMESPACE&gt;</code> with the namespace you&apos;ve previously configured for our platform to run in (as specified in the <strong>Kubernetes Prerequisites</strong> section.)</p>\n<h2 id=\"installation-complete\" style=\"position:relative;\"><a href=\"#installation-complete\" aria-label=\"installation complete permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Installation complete</h2>\n<p>That&apos;s it, the platform will automatically pick up on events sent to the domain you have specified and process them using your provided Message Queue.</p>\n<p>Please keep the files generate by the installation process in a safe place, as it will make updating the platform exponentially easier. Feel free to keep in Revision Control the files created during the installation process to keep a record of the platform state, if you would like.</p>\n<h1 id=\"updates-to-the-platform\" style=\"position:relative;\"><a href=\"#updates-to-the-platform\" aria-label=\"updates to the platform permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Updates to the Platform</h1>\n<h2 id=\"manual-updates\" style=\"position:relative;\"><a href=\"#manual-updates\" aria-label=\"manual updates permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Manual Updates</h2>\n<p>Using the files generated by the Installation Process, you can repeat Step 2 and Step 3 of the installation process to create updated instructions. Then, run the command <code class=\"language-text\">helm upgrade &lt;RELEASE&gt; metarouter-enterprise -f ./metarouter-ee.yaml</code> and Helm will handle rolling out changes to the updated components. There is no need to stop or switch traffic during this process.</p>\n<h2 id=\"automated-stable-updates\" style=\"position:relative;\"><a href=\"#automated-stable-updates\" aria-label=\"automated stable updates permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Automated Stable Updates</h2>\n<p><strong>Note:</strong> This is a stub of a future feature. Currently not available.</p></body></html>\n    </section>\n    <div class=\"section-border\"></div>\n  \n    <section>\n      \n    <div class=\"toc\">\n      <div class=\"toc-sticky\">\n        <h6>In this Section:</h6>\n        <ul><li><a href=\"#version-control\">Version Control</a></li> <li><a href=\"#canary-configuration-management\">Canary Configuration Management</a></li></ul>\n      </div>\n    </div>\n  \n      <html><head></head><body><h1 id=\"config-and-management\" style=\"position:relative;\" class=\"section-anchor\"><a href=\"#config-and-management\" aria-label=\"controlling how the metarouter platform sends data permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Controlling how the MetaRouter Platform sends data</h1>\n<p>The MetaRouter Streaming Data Platform will accept events from <strong>Sources</strong>, identified by their Write Key, and fan-out that data to the Source&apos;s <strong>Destinations</strong>, which map and forward the data out of the platform to their respective endpoints. You can control which Sources are allowed to have data received by the platform and which destinations are sent the data by providing the platform with a <strong>Source Configuration</strong>.</p>\n<p>For example, if you have two applications, one a website and another a server that supports said website, you can give them a unique identifier, called the Write Key, that will allow you to detail where their events go. Using the Write Keys <code class=\"language-text\">WEB01</code> and <code class=\"language-text\">SVR01</code> for example, you would then create two Source Configurations so the platform knows what to do once it receives events with those Write Keys.</p>\n<p>In order to create effective Source Configurations, you&apos;ll need send events to Destinations. Let&apos;s say that you&apos;d like want events from the server to go into S3, but want the web events to go to S3 and Google Analytics. Your Source Configurations would look something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">&quot;WEB01&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">&quot;s3&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">&quot;config&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      ...\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">&quot;google-analytics&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">&quot;config&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      ...\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token property\">&quot;SVR01&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">&quot;s3&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">&quot;config&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      ...\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Each configuration for a Destination can be unique per Source, but cannot have more than one of the same Destination for a single Source. To find out what the <code class=\"language-text\">config</code> parameters are for a Destination, visit the <a href=\"/enterprise-destinations/overview/\">Destinations section</a>.</p>\n<h2 id=\"version-control\" style=\"position:relative;\"><a href=\"#version-control\" aria-label=\"version control permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Version Control</h2>\n<p>We recommend using version control to save the contents of the configuration JSON file. The state of the configuration stored inside of the cluster does not maintain a state history. If a configuration is updated through the process outlined below, it will overwrite the current configuration with the new revision. In order to roll back a configuration change the pervious version of the previous version of the JSON file will need to be uploaded again.</p>\n<h2 id=\"canary-configuration-management\" style=\"position:relative;\"><a href=\"#canary-configuration-management\" aria-label=\"canary configuration management permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Canary Configuration Management</h2>\n<p>Canary is our tool that delegates instructions to the rest of the platform. It has a built-in API that can take updates to Sources and immediately deploy them to the rest of the platform.</p>\n<h3 id=\"manual-updates\" style=\"position:relative;\"><a href=\"#manual-updates\" aria-label=\"manual updates permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Manual Updates</h3>\n<h4 id=\"step-1-locate-canary\" style=\"position:relative;\"><a href=\"#step-1-locate-canary\" aria-label=\"step 1 locate canary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Step 1: Locate Canary</h4>\n<p>Using Kubernetes&apos; built-in tools, you can connect your local environment to Canary to pass it instructions directly.</p>\n<p>Find the pod name of Canary by running <code class=\"language-text\">kubectl get pods -n &lt;NAMESPACE&gt;</code>, filling in the correct namepsace for your deployment, and find a pod that has <em>canary</em> in it&apos;s name. Copy the full pod name.</p>\n<h4 id=\"step-2-port-forward-canary\" style=\"position:relative;\"><a href=\"#step-2-port-forward-canary\" aria-label=\"step 2 port forward canary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Step 2: Port Forward Canary</h4>\n<p>Using the pod name you copied in Step 1, run the command <code class=\"language-text\">kubectl port-forward &lt;POD_NAME&gt; 8080 -n &lt;NAMESPACE&gt;</code>, replacing the pod name and namespace with the correct values. You should now see the console verify that your local system is not connected to Canary on port 8080.</p>\n<h4 id=\"step-3-post-the-source-configuration-to-canary\" style=\"position:relative;\"><a href=\"#step-3-post-the-source-configuration-to-canary\" aria-label=\"step 3 post the source configuration to canary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Step 3: POST the Source Configuration to Canary</h4>\n<p>You want to send a POST request to <code class=\"language-text\">localhost:8080/cache/set/WRITEKEY</code>, where <code class=\"language-text\">WRITEKEY</code> is the Write Key of your Source and the <code class=\"language-text\">application/json</code> body is an object of the Destinations and their configurations.</p>\n<p>Here is an example of the request body:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">&quot;WEB01&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">&quot;facebook-pixel&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">&quot;config&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">&quot;pixelId&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;348149915804750&quot;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;valueFieldIdentifier&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;price&quot;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;whitelistPII&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">&quot;email&quot;</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">&quot;phone&quot;</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">&quot;google-analytics&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">&quot;config&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">&quot;appId&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;UA-XXXXXXXX-4&quot;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;searchParam&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;searchRedirect&quot;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;baseURL&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;http://www.metarouter.io/&quot;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And here is a cURL example of the request:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> localhost:8080/cache/set/WRITEKEY -X POST --data <span class=\"token string\">&quot;{<span class=\"token entity\" title=\"\\&quot;\">\\&quot;</span>google-analytics<span class=\"token entity\" title=\"\\&quot;\">\\&quot;</span>: {<span class=\"token entity\" title=\"\\&quot;\">\\&quot;</span>config<span class=\"token entity\" title=\"\\&quot;\">\\&quot;</span>: {<span class=\"token entity\" title=\"\\&quot;\">\\&quot;</span>appId<span class=\"token entity\" title=\"\\&quot;\">\\&quot;</span>: <span class=\"token entity\" title=\"\\&quot;\">\\&quot;</span>UA-XXXXXXXX-4<span class=\"token entity\" title=\"\\&quot;\">\\&quot;</span>}}}&quot;</span> -H <span class=\"token string\">&quot;Content-type: application/json&quot;</span></code></pre></div>\n<p>Or from a file:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> localhost:8080/cache/set/WRITEKEY -X POST --data-binary <span class=\"token string\">&quot;@PATH/TO/YOUR-CONFIG-FILE.json&quot;</span> -H <span class=\"token string\">&quot;Content-type: application/json&quot;</span></code></pre></div>\n<h4 id=\"step-4-verify-source-configuration\" style=\"position:relative;\"><a href=\"#step-4-verify-source-configuration\" aria-label=\"step 4 verify source configuration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Step 4: Verify Source Configuration</h4>\n<p>You can also make a GET request to Canary to read the existing Source Configuration by the Source&apos;s Write Key. Simply make a GET request to <code class=\"language-text\">localhost:8080/cache/get/WRITEKEY</code> and Canary will respond with a JSON payload it has for that configuration.</p>\n<p>Here is a cURL example of that request:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> localhost:8080/cache/get/WRITEKEY</code></pre></div>\n<h3 id=\"using-our-management-tools\" style=\"position:relative;\"><a href=\"#using-our-management-tools\" aria-label=\"using our management tools permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Using our Management Tools</h3>\n<p><strong>Note:</strong> This is a stub of a future feature. Coming Soon.</p>\n<h3 id=\"using-our-remote-management-connection\" style=\"position:relative;\"><a href=\"#using-our-remote-management-connection\" aria-label=\"using our remote management connection permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Using our Remote Management Connection</h3>\n<p><strong>Note:</strong> This is a stub of a future feature. Coming Soon.</p></body></html>\n    </section>\n    <div class=\"section-border\"></div>\n  "}}}