{"componentChunkName":"component---src-templates-page-js","path":"/enterprise-destinations/facebook-pixel/","result":{"data":{"markdownRemark":{"frontmatter":{"path":"/enterprise-destinations/facebook-pixel/","navText":"Facebook Pixel","seoTitle":null}}},"pageContext":{"html":"\n    <section>\n      \n    <div class=\"toc\">\n      <div class=\"toc-sticky\">\n        <h6>On this Page:</h6>\n        <ul><li><a href=\"#what-is-facebook-pixel-and-how-does-it-work\">What is Facebook Pixel and how does it work?</a></li> <li><a href=\"#why-send-data-to-facebook-pixel-using-metarouter\">Why send data to Facebook Pixel using MetaRouter?</a></li> <li><a href=\"#getting-started-with-facebook-and-metarouter\">Getting Started with Facebook and MetaRouter</a></li> <li><a href=\"#events\">Events</a></li> <li><a href=\"#timestamps\">Timestamps</a></li> <li><a href=\"#pii-blacklisting\">PII Blacklisting</a></li></ul>\n      </div>\n    </div>\n  \n      <html><head></head><body><h1 id=\"facebook-pixel\" style=\"position:relative;\" data-tags=\"enterprise,destinations\"><a href=\"#\" aria-label=\"facebook pixel permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Facebook Pixel</h1>\n<p>MetaRouter makes it easy to send your data to Facebook Pixel. Once you follow the steps below, your data will be routed through our platform and pushed to Facebook Pixel in the appropriate format.</p>\n<p><strong>Note:</strong> MetaRouter&apos;s Facebook Pixel destination consolidates what was previously Facebook&apos;s &quot;Ads for Websites&quot; suite, which consisted of both Facebook Custom Audiences and Facebook Conversion Tracking.</p>\n<h2 id=\"what-is-facebook-pixel-and-how-does-it-work\" style=\"position:relative;\"><a href=\"#what-is-facebook-pixel-and-how-does-it-work\" aria-label=\"what is facebook pixel and how does it work permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>What is Facebook Pixel and how does it work?</h2>\n<p>Facebook Pixel is an Ad system designed for conversion optimization and lead tracking. It allows you to manage all of your ads from one platform and uses prospecting tools to target your ads to lookalike audiences. By providing this dynamic service, Facebook Pixel allows marketers to optimize cross-platform ads for custom conversions and see when users view content, search for a product, interact with their wishlist, or add payment info.</p>\n<p>Facebook Pixel uses a JavaScript Tag API to track audiences and custom user events like page visibility and page length. In order to be used, this JavaScript library must be added to every page of your site. It has a standard set of natively-integrated events such as product views, adds to cart, and purchases. While extremely extensible, tracking dynamic data like sku, name, and price from your database will require that custom code be added to your site.</p>\n<h2 id=\"why-send-data-to-facebook-pixel-using-metarouter\" style=\"position:relative;\"><a href=\"#why-send-data-to-facebook-pixel-using-metarouter\" aria-label=\"why send data to facebook pixel using metarouter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Why send data to Facebook Pixel using MetaRouter?</h2>\n<p>With MetaRouter, you can use Facebook Pixel without having to install their JavaScript library on every page of your site. We also eliminate the need to write custom code to track user event data. Once your Facebook Pixel is routed through MetaRouter, our platform translates page views and events into corresponding Facebook Pixel events.</p>\n<h2 id=\"getting-started-with-facebook-and-metarouter\" style=\"position:relative;\"><a href=\"#getting-started-with-facebook-and-metarouter\" aria-label=\"getting started with facebook and metarouter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Getting Started with Facebook and MetaRouter</h2>\n<h3 id=\"facebook-pixel-side\" style=\"position:relative;\"><a href=\"#facebook-pixel-side\" aria-label=\"facebook pixel side permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Facebook Pixel Side</h3>\n<p>To get started with this integration, you&apos;ll first need to create a Facebook for Business account. <a href=\"https://www.facebook.com/business/a/online-sales/custom-audiences-website\">Follow the instructions</a> for creating a Pixel.</p>\n<p>You&apos;ll only create one pixel for your site (typically labeled with the name of your business). This pixel will <a href=\"https://www.facebook.com/business/help/1686199411616919\">replace all the functionality</a> previously given to Facebook Audiences and Facebook Conversions (as well as allowing some additional features, such as custom conversions).</p>\n<p><a href=\"/images/facebook-pixel1.png\" target=\"_mr\"><img src=\"/images/facebook-pixel1.png\" alt=\"facebook-pixel1\"></a></p>\n<p>Once that&apos;s set up, identify your unique <code class=\"language-text\">pixelId</code>, a 15 digit number that uniquely identifies your site.</p>\n<h3 id=\"metarouter-side\" style=\"position:relative;\"><a href=\"#metarouter-side\" aria-label=\"metarouter side permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>MetaRouter Side</h3>\n<p>Put your Facebook Pixel ID into your MetaRouter account and give your new connection a unique name.</p>\n<p>With that, just click Save to activate your pipeline.</p>\n<h4 id=\"configuration-file\" style=\"position:relative;\"><a href=\"#configuration-file\" aria-label=\"configuration file permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Configuration file</h4>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&quot;facebook-pixel&quot;</span>\n        <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">pixelId</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&quot;348149915804750&quot;</span>\n          <span class=\"token key atrule\">valueFieldIdentifier</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&quot;price&quot;</span>\n          <span class=\"token key atrule\">whitelistPII</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token string\">&quot;email&quot;</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token string\">&quot;phone&quot;</span>\n          <span class=\"token key atrule\">categoryToContentTypeMapping</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">&apos;Games&apos;</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&apos;group&apos;</span>\n            <span class=\"token key atrule\">&apos;Lorem&apos;</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&apos;ipsum&apos;</span>\n          <span class=\"token key atrule\">customEventsMapping</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">event</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&quot;Custom Event 1&quot;</span>\n              <span class=\"token key atrule\">mapping</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&quot;ViewContent&quot;</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">event</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&quot;Custom Event 2&quot;</span>\n              <span class=\"token key atrule\">mapping</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&quot;Subscribe&quot;</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">event</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&quot;ViewCategory&quot;</span>\n              <span class=\"token key atrule\">mapping</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&quot;ViewContent&quot;</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">event</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&quot;Order Updated&quot;</span>\n              <span class=\"token key atrule\">mapping</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&quot;ViewContent&quot;</span>\n              <span class=\"token key atrule\">valueFieldIdentifier</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&quot;revenueFORtest&quot;</span>\n          <span class=\"token key atrule\">customPropertiesForStandardEvents</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token string\">&quot;prop1&quot;</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token string\">&quot;prop23&quot;</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">pixelId</code> - the id you&apos;ve got from the Facebook Dashboard</li>\n<li><code class=\"language-text\">valueFieldIdentifier</code> - if no <code class=\"language-text\">valueFieldIdentifier</code> is set on standard events mappings or on any custom event mapped as custom, we&#x2019;ll use this to get the value parameter.</li>\n<li><code class=\"language-text\">whitelistPII</code> - By default, we will strip any <a href=\"#pii-blacklisting\">PII</a> from the properties of track events that get sent to Facebook. If you would like to override this functionality, you can input each property you would like to whitelist as a line item in this setting.</li>\n<li><code class=\"language-text\">categoryToContentTypeMapping</code> - Enter your category value on the left, and the Facebook content type to map to on the right. Facebook recognizes certain event types that can help deliver relevant ads. If no category values are mapped we&#x2019;ll default to product and product_group, depending on the event.</li>\n<li>\n<p><code class=\"language-text\">customEventsMapping</code> - Enter your event on the <code class=\"language-text\">event</code> property, and the <strong>Facebook Standard Event</strong> to map to on <code class=\"language-text\">mapping</code> properties. Facebook recognizes certain standard events that can be used across Custom Audiences, custom conversions, conversion tracking, and conversion optimization. When you map an event to a standard Facebook event, we&#x2019;ll send the event by that name. Any unmapped events will still be sent as Custom Events. According to <a href=\"https://developers.facebook.com/docs/facebook-pixel/implementation/conversion-tracking/#standard-events\">Facebook Pixel Documentation</a>, accepted Standard Events, with <code class=\"language-text\">mapping</code> values as follows:</p>\n<ul>\n<li><code class=\"language-text\">AddPaymentInfo</code></li>\n<li><code class=\"language-text\">AddToCart</code></li>\n<li><code class=\"language-text\">AddToWishlist</code></li>\n<li><code class=\"language-text\">CompleteRegistration</code></li>\n<li><code class=\"language-text\">Contact</code></li>\n<li><code class=\"language-text\">CustomizeProduct</code></li>\n<li><code class=\"language-text\">Donate</code></li>\n<li><code class=\"language-text\">FindLocation</code></li>\n<li><code class=\"language-text\">InitiateCheckout</code></li>\n<li><code class=\"language-text\">Lead</code></li>\n<li><code class=\"language-text\">PageView</code></li>\n<li><code class=\"language-text\">Purchase</code></li>\n<li><code class=\"language-text\">Schedule</code></li>\n<li><code class=\"language-text\">Search</code></li>\n<li><code class=\"language-text\">StartTrial</code></li>\n<li><code class=\"language-text\">SubmitApplication</code></li>\n<li><code class=\"language-text\">Subscribe</code></li>\n<li><code class=\"language-text\">ViewContent</code></li>\n</ul>\n</li>\n<li><code class=\"language-text\">customPropertiesForStandardEvents</code> - If you send a custom property with your <code class=\"language-text\">track()</code> calls and you want to send it to your Facebook Pixel events you can add it here.</li>\n</ul>\n<h2 id=\"events\" style=\"position:relative;\"><a href=\"#events\" aria-label=\"events permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Events</h2>\n<h3 id=\"default-properties\" style=\"position:relative;\"><a href=\"#default-properties\" aria-label=\"default properties permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Default properties</h3>\n<p>For all of the events sent to Facebook Pixel (including your <code class=\"language-text\">track()</code>, <code class=\"language-text\">identify()</code> and <code class=\"language-text\">page()</code> events) we map the following properties:</p>\n<ul>\n<li><code class=\"language-text\">fbp</code> - facebook cookie</li>\n<li><code class=\"language-text\">id</code> - your <code class=\"language-text\">pixelId</code> from <strong>integrations.yaml</strong></li>\n<li><code class=\"language-text\">it</code> - your <code class=\"language-text\">receivedAt</code> from payload</li>\n<li><code class=\"language-text\">ts</code> - current timestamp</li>\n<li><code class=\"language-text\">eid</code> - <code class=\"language-text\">messageId</code> from payload</li>\n<li><code class=\"language-text\">ud[em]</code> - email, if it exits in traits</li>\n<li><code class=\"language-text\">ud[uid]</code> - <code class=\"language-text\">userId</code> from payload</li>\n<li><code class=\"language-text\">dl</code> - <code class=\"language-text\">fullURL</code> of the page.</li>\n<li><code class=\"language-text\">rl</code> - <code class=\"language-text\">referrer</code> of the page</li>\n</ul>\n<h3 id=\"identify\" style=\"position:relative;\"><a href=\"#identify\" aria-label=\"identify permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Identify</h3>\n<p>We&apos;ll map your <code class=\"language-text\">page()</code> calls to the <code class=\"language-text\">UserProperties</code> Pixel Standard event, without additional data</p>\n<h3 id=\"page\" style=\"position:relative;\"><a href=\"#page\" aria-label=\"page permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Page</h3>\n<p>We&apos;ll map your <code class=\"language-text\">page()</code> calls to the <code class=\"language-text\">PageView</code> Pixel Standard event, without additional data.</p>\n<h3 id=\"default-analyticsjs-standard-e-commerce-events-to-pixel-standard-events\" style=\"position:relative;\"><a href=\"#default-analyticsjs-standard-e-commerce-events-to-pixel-standard-events\" aria-label=\"default analyticsjs standard e commerce events to pixel standard events permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Default Analytics.js Standard E-commerce events to Pixel Standard Events</h3>\n<p>By default, we map some of the Analytics.js Standard E-commerce events to Pixel Standard events, as following.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\" style=\"width: 25%;\">Analytics.js</th>\n<th align=\"left\" style=\"width: 25%;\">Pixel Standard Event</th>\n<th align=\"left\" style=\"width: 50%;\">Pixel parameters</th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\">Products Searched</td>\n<td align=\"left\">Search</td>\n<td align=\"left\"><code class=\"language-text\">content_category</code>, <code class=\"language-text\">content_ids</code>, <code class=\"language-text\">contents</code>, <code class=\"language-text\">currency</code>, <code class=\"language-text\">search_string</code>, <code class=\"language-text\">value</code></td>\n</tr>\n<tr>\n<td align=\"left\">Product List Viewed</td>\n<td align=\"left\">ViewContent</td>\n<td align=\"left\"><code class=\"language-text\">content_ids</code>, <code class=\"language-text\">content_name</code>, <code class=\"language-text\">content_type</code>, <code class=\"language-text\">contents</code>, <code class=\"language-text\">currency</code>, <code class=\"language-text\">value</code></td>\n</tr>\n<tr>\n<td align=\"left\">Product Viewed</td>\n<td align=\"left\">ViewContent</td>\n<td align=\"left\"><code class=\"language-text\">content_ids</code>, <code class=\"language-text\">content_name</code>, <code class=\"language-text\">content_type</code>, <code class=\"language-text\">contents</code>, <code class=\"language-text\">currency</code>, <code class=\"language-text\">value</code></td>\n</tr>\n<tr>\n<td align=\"left\">Product Added</td>\n<td align=\"left\">AddToCart</td>\n<td align=\"left\"><code class=\"language-text\">content_ids</code>, <code class=\"language-text\">content_name</code>, <code class=\"language-text\">content_type</code>, <code class=\"language-text\">contents</code>, <code class=\"language-text\">currency</code>, <code class=\"language-text\">value</code></td>\n</tr>\n<tr>\n<td align=\"left\">Checkout Started</td>\n<td align=\"left\">InitiateCheckout</td>\n<td align=\"left\"><code class=\"language-text\">content_category</code>, <code class=\"language-text\">content_ids</code>, <code class=\"language-text\">contents</code>, <code class=\"language-text\">currency</code>, <code class=\"language-text\">num_items</code>, <code class=\"language-text\">value</code></td>\n</tr>\n<tr>\n<td align=\"left\">Payment Info Entered</td>\n<td align=\"left\">AddPaymentInfo</td>\n<td align=\"left\"><code class=\"language-text\">content_category</code>, <code class=\"language-text\">content_ids</code>, <code class=\"language-text\">contents</code>, <code class=\"language-text\">currency</code>, <code class=\"language-text\">value</code></td>\n</tr>\n<tr>\n<td align=\"left\">Order Completed</td>\n<td align=\"left\">Purchase</td>\n<td align=\"left\"><code class=\"language-text\">content_ids</code>, <code class=\"language-text\">content_name</code>, <code class=\"language-text\">content_type</code>, <code class=\"language-text\">contents</code>, <code class=\"language-text\">currency</code>, <code class=\"language-text\">num_items</code>, <code class=\"language-text\">value</code></td>\n</tr>\n<tr>\n<td align=\"left\">Product Added to Wishlist</td>\n<td align=\"left\">AddToWishlist</td>\n<td align=\"left\"><code class=\"language-text\">content_name</code>, <code class=\"language-text\">content_category</code>, <code class=\"language-text\">content_ids</code>, <code class=\"language-text\">contents</code>, <code class=\"language-text\">currency</code>, <code class=\"language-text\">value</code></td>\n</tr>\n</tbody>\n</table>\n<p>All Pixel Standard Events will be mapped with the following properties.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\" style=\"width: 25%;\">Property</th>\n<th align=\"left\" style=\"width: 25%;\">Type</th>\n<th align=\"left\" style=\"width: 50%;\">Details</th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><code class=\"language-text\">content_ids</code></td>\n<td align=\"left\">Array of Integers or Strings</td>\n<td align=\"left\">Each id of your <code class=\"language-text\">product[i].product_id</code></td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">contents</code></td>\n<td align=\"left\">Array of Objects</td>\n<td align=\"left\">Product details <code class=\"language-text\">{ id: track.productId() || track.id() || track.sku() || undefined, quantity: t.quantity(), item_price: t.price() }</code></td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">num_items</code></td>\n<td align=\"left\">Integer</td>\n<td align=\"left\">Maps to <code class=\"language-text\">content_ids.length</code></td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">content_type</code></td>\n<td align=\"left\">String</td>\n<td align=\"left\">Either <code class=\"language-text\">product</code> or <code class=\"language-text\">product_group</code> based your products array length or on <code class=\"language-text\">categoryToContentTypeMapping[category_name]</code> parameter from <strong>integrations.yaml</strong></td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">content_name</code></td>\n<td align=\"left\">String</td>\n<td align=\"left\">The <code class=\"language-text\">track.name()</code> property of the payload</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">content_category</code></td>\n<td align=\"left\">String</td>\n<td align=\"left\">The <code class=\"language-text\">track.category() || &apos;&apos;</code> of the page / or category of the first product <code class=\"language-text\">product[0].category()</code></td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">currency</code></td>\n<td align=\"left\">String</td>\n<td align=\"left\">The currency for the specified value. Mapped from <code class=\"language-text\">track.currency()</code> or to &quot;USD&quot; if no currency is specified</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">search_string</code></td>\n<td align=\"left\">String</td>\n<td align=\"left\"><code class=\"language-text\">query</code> parameter from properties for the <code class=\"language-text\">Search</code> event or <code class=\"language-text\">undefined</code> for other events, for example <code class=\"language-text\">track.proxy(&apos;properties.query&apos;) || undefined</code></td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">value</code></td>\n<td align=\"left\">String</td>\n<td align=\"left\">The field you&apos;ve mapped for the event in your <code class=\"language-text\">valueFieldIdentifier</code> property from <strong>integrations.yaml</strong></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"adding-your-own-events\" style=\"position:relative;\"><a href=\"#adding-your-own-events\" aria-label=\"adding your own events permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Adding your own events</h3>\n<p>To send <strong>Standard</strong> events, use the Analytics.js destination setting (from <strong>integrations.yaml</strong> ) named <code class=\"language-text\">customEventsMapping</code> . Then, any time Analytics.js receives one of the events in that mapping, it will be sent to Facebook as the standard event you specified. All properties you included in the event will be sent as event properties.</p>\n<h3 id=\"custom-events\" style=\"position:relative;\"><a href=\"#custom-events\" aria-label=\"custom events permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Custom events</h3>\n<p>To send Custom events, send any event that does not appear in either mapping. All properties you included in the event will be included as event properties.</p>\n<h2 id=\"timestamps\" style=\"position:relative;\"><a href=\"#timestamps\" aria-label=\"timestamps permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Timestamps</h2>\n<p>Facebook Pixel uses a custom timestamp format: an ISO 8601 timestamp without timezone information. For the following event fields, if you pass in a JavaScript <code class=\"language-text\">Date</code> object, it will be converted to this custom format:</p>\n<ul>\n<li><code class=\"language-text\">checkinDate</code></li>\n<li><code class=\"language-text\">checkoutDate</code></li>\n<li><code class=\"language-text\">departingArrivalDate</code></li>\n<li><code class=\"language-text\">departingDepartureDate</code></li>\n<li><code class=\"language-text\">returningArrivalDate</code></li>\n<li><code class=\"language-text\">returningDepartureDate</code></li>\n<li><code class=\"language-text\">travelEnd</code></li>\n<li><code class=\"language-text\">travelStart</code></li>\n</ul>\n<h2 id=\"pii-blacklisting\" style=\"position:relative;\"><a href=\"#pii-blacklisting\" aria-label=\"pii blacklisting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>PII Blacklisting</h2>\n<p>Facebook enforces strict guidelines around sending Personally Identifiable Information (PII) as properties of Pixel events. In order to adhere to these guidelines, Analytics.js will automatically scan <code class=\"language-text\">track</code> event properties for PII and remove any that get flagged from the event to Facebook. The following keys are currently filtered:</p>\n<ul>\n<li><code class=\"language-text\">email</code></li>\n<li><code class=\"language-text\">firstName</code></li>\n<li><code class=\"language-text\">lastName</code></li>\n<li><code class=\"language-text\">gender</code></li>\n<li><code class=\"language-text\">city</code></li>\n<li><code class=\"language-text\">country</code></li>\n<li><code class=\"language-text\">phone</code></li>\n<li><code class=\"language-text\">state</code></li>\n<li><code class=\"language-text\">zip</code></li>\n<li><code class=\"language-text\">birthday</code></li>\n<li><code class=\"language-text\">ssn</code></li>\n</ul>\n<p>Any <code class=\"language-text\">track</code> events with properties containing those keys will be sent to Facebook with those properties omitted.</p>\n<p>If you have events that use any of those keys for non-PII properties, you can manually whitelist them using the <code class=\"language-text\">whitelistPII</code> object from your <strong>integrations.yaml</strong> file</p></body></html>\n    </section>\n    <div class=\"section-border\"></div>\n  "}}}