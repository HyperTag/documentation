{"componentChunkName":"component---src-templates-page-js","path":"/enterprise-destinations/s3-event-logs/","result":{"data":{"markdownRemark":{"frontmatter":{"path":"/enterprise-destinations/s3-event-logs/","navText":"s3 Event Logs","seoTitle":null}}},"pageContext":{"html":"\n    <section>\n      \n    <div class=\"toc\">\n      <div class=\"toc-sticky\">\n        <h6>On this Page:</h6>\n        <ul><li><a href=\"#what-is-amazon-s3-and-how-does-it-work\">What is Amazon S3 and how does it work?</a></li> <li><a href=\"#why-send-data-to-amazon-s3-using-metarouter\">Why send data to Amazon S3 using MetaRouter?</a></li> <li><a href=\"#getting-started\">Getting Started</a></li> <li><a href=\"#things-to-note\">Things to Note:</a></li></ul>\n      </div>\n    </div>\n  \n      <html><head></head><body><h1 id=\"amazon-s3-event-logs\" style=\"position:relative;\" data-tags=\"enterprise,destinations\"><a href=\"#\" aria-label=\"amazon s3 event logs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Amazon S3 Event Logs</h1>\n<p>MetaRouter makes it easy to send your data to an Amazon S3 bucket. Once you follow the steps below, your data will be routed through our platform and pushed to Amazon S3 in the appropriate format.</p>\n<h2 id=\"what-is-amazon-s3-and-how-does-it-work\" style=\"position:relative;\"><a href=\"#what-is-amazon-s3-and-how-does-it-work\" aria-label=\"what is amazon s3 and how does it work permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>What is Amazon S3 and how does it work?</h2>\n<p>Amazon Simple Storage Service (S3) is a scalable web-based cloud storage service that allows you to store and retrieve data from anywhere at anytime. It offers an extremely flexible set of storage management and administration capabilities, supporting:</p>\n<ul>\n<li>SSL transfers and automatic encryptions for guaranteed data security</li>\n<li>Network-optimized, physical disk-based, or third-party connector methods for easy data imports and exports</li>\n<li>Object tagging for easy category customization</li>\n</ul>\n<p>Getting data into your S3 bucket natively requires quite a bit of developer work; you&apos;d need to use an analytics tool like Google Analytics and write an ETL pipeline to bring the data from that analytics tool to S3. This is ties up your engineering resources and pre-formats the data in your S3 bucket, rather than giving you access to your raw data.</p>\n<h2 id=\"why-send-data-to-amazon-s3-using-metarouter\" style=\"position:relative;\"><a href=\"#why-send-data-to-amazon-s3-using-metarouter\" aria-label=\"why send data to amazon s3 using metarouter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Why send data to Amazon S3 using MetaRouter?</h2>\n<p>We make delivering data to Amazon S3 possible with a few clicks, in the <a href=\"/sources-and-sdks/\">standardized analytics event format</a> you are already using for other integrations.</p>\n<p>When you enable the Amazon S3 integration, we begin delivering the raw event data you need to power your reports and custom analysis directly into your designated Amazon S3 bucket. Everything is stored as line-separated JSON objects, each containing one analytic event in its original format.</p>\n<p>MetaRouter spares you the headache of writing custom ETL pipelines to get your data into buckets, and makes it easy to start your data engineering journey with s3.</p>\n<h2 id=\"getting-started\" style=\"position:relative;\"><a href=\"#getting-started\" aria-label=\"getting started permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Getting Started</h2>\n<p>MetaRouter makes it easy to copy broadcasted events to an <a href=\"https://aws.amazon.com/s3/\">Amazon Simple Storage Service (S3) bucket</a>. You&apos;ll only need to configure the S3 Event Logs connector within your <a href=\"https://app.metarouter.io/\">MetaRouter dashboard</a>, and include our bucket policy.</p>\n<h3 id=\"amazon-s3-side\" style=\"position:relative;\"><a href=\"#amazon-s3-side\" aria-label=\"amazon s3 side permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Amazon S3 Side</h3>\n<h4 id=\"create-an-amazon-s3-bucket-within-your-aws-account\" style=\"position:relative;\"><a href=\"#create-an-amazon-s3-bucket-within-your-aws-account\" aria-label=\"create an amazon s3 bucket within your aws account permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Create an Amazon S3 bucket within your AWS account.</h4>\n<p><a href=\"/images/s3-event-logs1.png\" target=\"_mr\"><img src=\"/images/s3-event-logs1.png\" alt=\"s3-event-logs1\"></a></p>\n<p><strong>Note:</strong> See below to confirm your region.</p>\n<h4 id=\"add-permission-for-the-bucket\" style=\"position:relative;\"><a href=\"#add-permission-for-the-bucket\" aria-label=\"add permission for the bucket permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Add Permission for the Bucket</h4>\n<p>Add an S3 bucket policy, which will grant the IAM user permission to copy events into your S3 bucket using <code class=\"language-text\">s3:PutObject</code>. The following is an example of what the policy might look like.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">&quot;Version&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;2012-10-17&quot;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">&quot;Id&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;Policy1475027027703&quot;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">&quot;Statement&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">&quot;Sid&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;Stmt1475027024994&quot;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;Effect&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;Allow&quot;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;Principal&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">&quot;AWS&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;arn:aws:iam::213824691356:user/s3-copy&quot;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;Action&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;s3:PutObject&quot;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;Resource&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;arn:aws:s3:::YOUR_BUCKET_NAME/*&quot;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">&quot;Sid&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;MetaRouterCopyAccess&quot;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;Effect&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;Allow&quot;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;Principal&quot;</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">&quot;AWS&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;arn:aws:iam::325517132571:user/s3-copy&quot;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;Action&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;s3:PutObject&quot;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">&quot;Resource&quot;</span><span class=\"token operator\">:</span> <span class=\"token string\">&quot;arn:aws:s3:::YOUR_BUCKET_NAME/*&quot;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"/images/s3-event-logs2.gif\" target=\"_mr\"><img src=\"/images/s3-event-logs2.gif\" alt=\"s3-event-logs1\"></a></p>\n<p>Please note the Access key and Secret Key for the AWS user. It will be used in the next section for configuration</p>\n<h3 id=\"metarouter-side\" style=\"position:relative;\"><a href=\"#metarouter-side\" aria-label=\"metarouter side permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>MetaRouter Side</h3>\n<p>You can configure your integrations using a <strong>integrations.yaml</strong> config file, where you define multiple destinations, each one with its own custom settings.</p>\n<p>The configuration needed for integrations is as follows:</p>\n<ul>\n<li><code class=\"language-text\">bucket</code> : The name of the bucket for which to save the events</li>\n<li><code class=\"language-text\">region</code> : Region where the bucket is located</li>\n<li><code class=\"language-text\">secretKey</code> : Secret key for the user to load data into the bucket</li>\n<li><code class=\"language-text\">accessKey</code> : Access key for the user to load data into the bucket</li>\n<li><code class=\"language-text\">encryption</code> : the type of encryption to use in the bucket. Valid values are <code class=\"language-text\">AES256</code> or <code class=\"language-text\">aws:kms</code>. If omitted the loader will store data without encryption</li>\n</ul>\n<p>Here is an example of <strong>integrations.yaml</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&apos;s3&apos;</span>\n  <span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">bucket</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&apos;test-bucket&apos;</span>\n    <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&apos;us-east-1&apos;</span>\n    <span class=\"token key atrule\">secretKey</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&apos;enter secret key here&apos;</span>\n    <span class=\"token key atrule\">accessKey</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&apos;enter access key here&apos;</span>\n    <span class=\"token key atrule\">encryption</span><span class=\"token punctuation\">:</span> <span class=\"token string\">&apos;AES-256&apos;</span></code></pre></div>\n<h2 id=\"things-to-note\" style=\"position:relative;\"><a href=\"#things-to-note\" aria-label=\"things to note permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>Things to Note:</h2>\n<h3 id=\"1-aws-region-required\" style=\"position:relative;\"><a href=\"#1-aws-region-required\" aria-label=\"1 aws region required permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>1. AWS Region (required)</h3>\n<p>The region in which your S3 bucket resides. You can find a list of regions for <a href=\"http://docs.aws.amazon.com/general/latest/gr/rande.html#s3_region\">Amazon S3 under the &quot;Region&quot; column here</a>. Enter your region exactly as it&apos;s shown (i.e. <code class=\"language-text\">us-east-1</code>).</p>\n<h3 id=\"2-server-side-encryption-optional\" style=\"position:relative;\"><a href=\"#2-server-side-encryption-optional\" aria-label=\"2 server side encryption optional permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>2. Server Side Encryption (optional)</h3>\n<p>AWS S3 supports <a href=\"http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingServerSideEncryption.html\">server side encryption</a>. If your bucket policy requires the server side encryption header to be set, you can specify that here. Example values for this field are <code class=\"language-text\">AES256</code> or <code class=\"language-text\">aws:kms</code>.</p>\n<h3 id=\"3-folder-structure\" style=\"position:relative;\"><a href=\"#3-folder-structure\" aria-label=\"3 folder structure permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"/></svg></a>3. Folder Structure</h3>\n<p>Events are placed inside the bucket with the following folder structure <strong>Year/Month/Day/hour/events.json</strong> all events are loaded into files and chunked into smaller files by the forwarder</p></body></html>\n    </section>\n    <div class=\"section-border\"></div>\n  "}}}